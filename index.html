<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Dbljump REST API Reference</title>
    <link rel="shortcut icon" type="image/ico" href="images/favicon.ico">

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #f8f8f2;
  background-color: #272822;
}
.highlight .err {
  color: #272822;
  background-color: #f92672;
}
.highlight .c, .highlight .cd, .highlight .cm, .highlight .c1, .highlight .cs {
  color: #75715e;
}
.highlight .cp {
  color: #f4bf75;
}
.highlight .nt {
  color: #f4bf75;
}
.highlight .o, .highlight .ow {
  color: #f8f8f2;
}
.highlight .p, .highlight .pi {
  color: #f8f8f2;
}
.highlight .gi {
  color: #a6e22e;
}
.highlight .gd {
  color: #f92672;
}
.highlight .gh {
  color: #66d9ef;
  background-color: #272822;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #ae81ff;
}
.highlight .kc {
  color: #fd971f;
}
.highlight .kt {
  color: #fd971f;
}
.highlight .kd {
  color: #fd971f;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #a6e22e;
}
.highlight .sr {
  color: #a1efe4;
}
.highlight .si {
  color: #cc6633;
}
.highlight .se {
  color: #cc6633;
}
.highlight .nn {
  color: #f4bf75;
}
.highlight .nc {
  color: #f4bf75;
}
.highlight .no {
  color: #f4bf75;
}
.highlight .na {
  color: #66d9ef;
}
.highlight .m, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mb, .highlight .mx {
  color: #a6e22e;
}
.highlight .ss {
  color: #a6e22e;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;JSON&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="images/logo.png" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="JSON">JSON</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='https://github.com/tripit/slate'>Documentation Powered by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="introduction">Introduction</h1>

<p>Welcome to the DblJump REST API. Dbljump is a video game reference application built with Ruby on Rails 5. This API follows the <a href="http://jsonapi.org">JSON API</a> specification.</p>

<aside class="notice">
All of your requests should include the following HTTP headers. Replace <code>vnum</code> with the API version you want to use (1 is the latest).<br /><br />
<code>Accept:application/vnd.api+json; version='vnum'<br />
Content-Type:application/vnd.api+json; version='vnum'</code></aside>

<aside class="notice">
This API uses <a href="https://jwt.io" target="_blank">JSON web tokens (JWT)</a> for authentication. When your request requires user authentication, it should include the following header replacing <code>user-JWT</code> with the token. For more details, see the user authentication section.<br /><br />
<code>Authorization:Bearer 'user-JWT'</code></aside>

<aside class="notice">
Successful responses include the following HTTP header.<br /><br />
<code>Content-Type:application/vnd.api+json; charset=utf-8</code></aside>

          <h1 id="users"><a name="users_intro"></a>Users</h1>

<p>Resources related to user accounts.</p>

<h3 id="request-attributes">Request attributes</h3>

<p>See <a href="#users_create">Register a new user</a> and <a href="#users_update">Update a user account details</a>.</p>

<h3 id="response-attributes">Response attributes</h3>

<p>See <a href="#users_show">Get single user</a>.</p>

          <h2 id="get-all-users">Get all users</h2>

<blockquote>
<p>HTTP 200 response body</p>
</blockquote>
<pre class="highlight plaintext"><code>{
  "data": [
    {
      "id": "1",
      "type": "users",
      "attributes": {
        "email": "tiki@dbljump.com",
        "username": "tikithekiwi",
        "role": "admin",
        "given_names": "Tiki",
        "family_name": "the Kiwi",
        "gender": "Female",
        "avatar": null,
        "birthday": "1988-09-01",
        "jwt": null
      },
      "relationships": {
        "country": {
          "data": null
        },
        "images": {
          "links": {
            "related": "http://api.dbljump.com/users/1/images"
          }
        }
      },
      "links": {
        "self": "http://api.dbljump.com/users/1"
      }
    },
    {
      "id": "3",
      "type": "users",
      "attributes": {
        "email": "member@example.com",
        "username": "member",
        "role": "member",
        "given_names": null,
        "family_name": null,
        "gender": null,
        "avatar": null,
        "birthday": null,
        "jwt": null
      },
      "relationships": {
        "country": {
          "data": null
        },
        "images": {
          "links": {
            "related": "http://api.dbljump.com/users/3/images"
          }
        }
      },
      "links": {
        "self": "http://api.dbljump.com/users/3"
      }
    },
    {
      "id": "4",
      "type": "users",
      "attributes": {
        "email": "editor@example.com",
        "username": "editor",
        "role": "editor",
        "given_names": null,
        "family_name": null,
        "gender": null,
        "avatar": null,
        "birthday": null,
        "jwt": null
      },
      "relationships": {
        "country": {
          "data": null
        },
        "images": {
          "links": {
            "related": "http://api.dbljump.com/users/4/images"
          }
        }
      },
      "links": {
        "self": "http://api.dbljump.com/users/4"
      }
    },
    {
      "id": "2",
      "type": "users",
      "attributes": {
        "email": "neil@example.com",
        "username": "neil",
        "role": "admin",
        "given_names": "Neil",
        "family_name": "Wheatley",
        "gender": "male",
        "avatar": "https://dbljumpheroku.s3.amazonaws.com/uploads/user_avatar/2/1703301240.jpg",
        "birthday": "1980-02-14",
        "jwt": null
      },
      "relationships": {
        "country": {
          "data": {
            "id": "219",
            "type": "places"
          },
          "links": {
            "related": "http://api.dbljump.com/places/countries/united-kingdom"
          }
        },
        "images": {
          "links": {
            "related": "http://api.dbljump.com/users/2/images"
          }
        }
      },
      "links": {
        "self": "http://api.dbljump.com/users/2"
      }
    }
  ],
  "links": {},
  "meta": {
    "total_items": 4
  }
}
</code></pre>
<p>Retrieve all users. Automatically paginated. Admin-level authorization required.</p>

<ul>
<li>User authentication: required</li>
<li>Authorization level: admin</li>
</ul>

<h3 id="http-request">HTTP request</h3>

<p><code class="prettyprint">GET /users</code></p>

<h3 id="url-query-parameters">URL query parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>fields[{record-type}]</td>
<td>All fields</td>
<td>Return only specified fields, e.g. <code class="prettyprint">?fields[users]=username,avatar</code></td>
</tr>
<tr>
<td>filter[{field}]</td>
<td>All records</td>
<td>Filter search by field, e.g. <code class="prettyprint">?filter[role]=admin</code></td>
</tr>
<tr>
<td>page[number]</td>
<td>1</td>
<td>Select the page number, e.g. <code class="prettyprint">?page[number]=3</code>, e.g. <code class="prettyprint">?page[number]=3</code></td>
</tr>
<tr>
<td>page[size]</td>
<td>30</td>
<td>Select the number of records per page, e.g. <code class="prettyprint">?page[size]=20</code></td>
</tr>
</tbody></table>

<h3 id="success-http-response-code">Success HTTP response code</h3>

<p><code class="prettyprint">200 OK</code></p>

          <h2 id="get-single-user"><a name="users_show"></a>Get single user</h2>

<blockquote>
<p>HTTP 200 response body</p>
</blockquote>
<pre class="highlight plaintext"><code>{
  "data": {
    "id": "2",
    "type": "users",
    "attributes": {
      "email": "neil@example.com",
      "username": "neil",
      "role": "admin",
      "given_names": "Neil",
      "family_name": "Wheatley",
      "gender": "male",
      "avatar": "https://dbljumpheroku.s3.amazonaws.com/uploads/user_avatar/2/1703301240.jpg",
      "birthday": "1980-02-14",
      "jwt": null
    },
    "relationships": {
      "country": {
        "data": {
          "id": "219",
          "type": "places"
        },
        "links": {
          "related": "http://api.dbljump.com/places/countries/united-kingdom"
        }
      },
      "images": {
        "links": {
          "related": "http://api.dbljump.com/users/2/images"
        }
      }
    },
    "links": {
      "self": "http://api.dbljump.com/users/2"
    }
  },
  "included": [
    {
      "id": "219",
      "type": "places",
      "attributes": {
        "subtype": "countries",
        "slug": "united-kingdom",
        "name": "United Kingdom",
        "short_name": "UK",
        "formatted": "United Kingdom"
      },
      "links": {
        "self": "http://api.dbljump.com/places/countries/united-kingdom"
      }
    }
  ],
  "meta": {
    "keywords": "neil, neil wheatley, user, dbljump, video games, pc games, gaming",
    "description": "Neil Wheatley is a member at Dbljump, the video game reference.",
    "created_at": "2017-03-30T12:40:08.338Z",
    "updated_at": "2017-03-30T12:43:40.490Z",
    "last_signed_in_at": "2017-03-30T12:43:39.368Z",
    "last_sign_in_ip": "86.12.129.15",
    "sign_in_count": 1,
    "activated_at": "2017-03-30T12:40:07.621Z"
  }
}
</code></pre>
<p>Retrieve a single existing user account record. Any user can retrive their own account. An admin-level user can retrieve any user account.</p>

<ul>
<li>User authentication: required</li>
<li>Authorization level: Any, if retrieving own account. Admin if retriveing other user&rsquo;s account.</li>
</ul>

<h3 id="http-request">HTTP request</h3>

<p><code class="prettyprint">GET /users/{id}</code> (replace <code class="prettyprint">{id}</code> with user record ID)</p>

<h3 id="success-http-response-code">Success HTTP response code</h3>

<p><code class="prettyprint">200 OK</code></p>

<h3 id="response-attributes"><a name="user_response_attrs"></a>Response attributes</h3>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Req&rsquo;d?</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>email</td>
<td>string</td>
<td>Y</td>
<td>The user&rsquo;s registered email address.</td>
</tr>
<tr>
<td>username</td>
<td>string</td>
<td>Y</td>
<td>The user&rsquo;s registered username.</td>
</tr>
<tr>
<td>role</td>
<td>string</td>
<td>Y</td>
<td>Authorization role. Can be <code class="prettyprint">member</code>, <code class="prettyprint">editor</code> or <code class="prettyprint">admin</code>. See <a href="#user_role">Role</a>.</td>
</tr>
<tr>
<td>given_names</td>
<td>string</td>
<td></td>
<td>The user&rsquo;s given names, e.g. &lsquo;Jean Pierre&rsquo;.</td>
</tr>
<tr>
<td>family_name</td>
<td>string</td>
<td></td>
<td>The user&rsquo;s family name, e.g. &#39;Blanc&rsquo;.</td>
</tr>
<tr>
<td>gender</td>
<td>string</td>
<td></td>
<td>Usually <code class="prettyprint">male</code> or <code class="prettyprint">female</code>, but can be any string.</td>
</tr>
<tr>
<td>avatar</td>
<td>string</td>
<td></td>
<td>URL of the user&rsquo;s avatar image.</td>
</tr>
<tr>
<td>birthday</td>
<td>date</td>
<td></td>
<td>E.g. &#39;1977-12-19&rsquo;</td>
</tr>
<tr>
<td>jwt</td>
<td>string</td>
<td></td>
<td>Always <code class="prettyprint">null</code> for this endpoint.</td>
</tr>
</tbody></table>

<h3 id="relationships">Relationships</h3>

<table><thead>
<tr>
<th>Association</th>
<th>Record type</th>
<th>Relationship type</th>
</tr>
</thead><tbody>
<tr>
<td>country</td>
<td>places(countries)</td>
<td>belongs_to</td>
</tr>
<tr>
<td>images</td>
<td>images</td>
<td>has_many</td>
</tr>
</tbody></table>

<h3 id="included">Included</h3>

<table><thead>
<tr>
<th>Record type</th>
<th>Relationship</th>
<th>Attributes included</th>
</tr>
</thead><tbody>
<tr>
<td>places(countries)</td>
<td>country</td>
<td>subtype, slug, name, short_name, formatted</td>
</tr>
</tbody></table>

<h3 id="meta">Meta</h3>

<p>The <code class="prettyprint">meta</code> section of the JSON response includes <code class="prettyprint">keywords</code>, <code class="prettyprint">description</code>, <code class="prettyprint">created_at</code>, <code class="prettyprint">updated_at</code>, <code class="prettyprint">last_signed_in_at</code>, <code class="prettyprint">last_sign_in_ip</code>, <code class="prettyprint">sign_in_count</code> and <code class="prettyprint">activated_at</code> attributes.</p>

          <h2 id="register-a-new-user"><a name="users_create"></a>Register a new user</h2>

<blockquote>
<p>Request body</p>
</blockquote>
<pre class="highlight plaintext"><code>{
  "data": {
    "type": "users",
    "attributes": {
      "username": "new_user",
      "email": "new@user.com",
      "password": "password",
      "password_confirmation": "password"
    }
  }
}
</code></pre>
<blockquote>
<p>HTTP 201 response body</p>
</blockquote>
<pre class="highlight plaintext"><code>{
  "data": {
    "id": "5",
    "type": "users",
    "attributes": {
      "email": "new@user.com",
      "username": "new_user",
      "role": "member",
      "given_names": null,
      "family_name": null,
      "gender": null,
      "avatar": null,
      "birthday": null,
      "jwt": null
    },
    "relationships": {
      "country": {
        "data": null,
        "links": {
          "related": "http://api.dbljump.com/places/countries/united-kingdom"
        }
      },
      "images": {
        "links": {
          "related": "http://api.dbljump.com/users/5/images"
        }
      }
    },
    "links": {
      "self": "http://api.dbljump.com/users/5"
    }
  },
  "meta": {
    "keywords": "new_user, new_user, user, dbljump, video games, pc games, gaming",
    "description": "new_user is a member at Dbljump, the video game reference.",
    "created_at": "2017-03-30T12:46:04.648Z",
    "updated_at": "2017-03-30T12:46:05.293Z",
    "last_signed_in_at": null,
    "last_sign_in_ip": null,
    "sign_in_count": 0,
    "activated_at": null
  }
}
</code></pre>
<p>Create a new user account. No authentication is required. Anyone can sign up for a new account with the default <code class="prettyprint">role</code> of <code class="prettyprint">member</code>.</p>

<ul>
<li>User authentication: not required</li>
<li>Authorization level: N/A</li>
</ul>

<h3 id="http-request">HTTP request</h3>

<p><code class="prettyprint">POST /users</code></p>

<h3 id="request-attributes">Request attributes</h3>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Req&rsquo;d</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>username</td>
<td>string</td>
<td>Y</td>
<td>Must be unique. 2-24 chars. Letters, numbers and underscores only. See <a href="#user_username">Username</a>.</td>
</tr>
<tr>
<td>email</td>
<td>string</td>
<td>Y</td>
<td>Must be unique. Max 255 chars. Email format only. Downcased on save. See <a href="#user_email">Email</a>.</td>
</tr>
<tr>
<td>password</td>
<td>string</td>
<td>Y</td>
<td>Any 8-24 chars.</td>
</tr>
<tr>
<td>password_confirmation</td>
<td>string</td>
<td>Y</td>
<td>Must match password.</td>
</tr>
</tbody></table>

<h3 id="username"><a name="user_username"></a>Username</h3>

<p>Usernames must be unique, 2-24 chars, and include letters, numbers and underscores only. They must match the following regular expressions.</p>

<table><thead>
<tr>
<th>Language</th>
<th>Regular expression</th>
</tr>
</thead><tbody>
<tr>
<td>Ruby</td>
<td>/^<a href="w/&amp;#124;.">a-zA-Z0-9</a>*[a-zA-Z0-9]$/</td>
</tr>
<tr>
<td>JavaScript</td>
<td>^<a href="\w&amp;#124;\.">a-zA-Z0-9</a>*[a-zA-Z0-9]$</td>
</tr>
</tbody></table>

<h3 id="email"><a name="user_email"></a>Email</h3>

<p>Email addresses must be unique, no moe than 255 chars, and be in a valid email format. They must match the following regular expressions.</p>

<table><thead>
<tr>
<th>Language</th>
<th>Regular expression</th>
</tr>
</thead><tbody>
<tr>
<td>Ruby</td>
<td>/\A[\w+-.]+@[a-z\d-.]+.[a-z]+\z/i</td>
</tr>
<tr>
<td>JavaScript</td>
<td>^[\w+-.]+@[a-z\d-.]+.[a-z]+$</td>
</tr>
</tbody></table>

<h3 id="success-http-response-code">Success HTTP response code</h3>

<p><code class="prettyprint">201 Created</code></p>

          <h2 id="update-a-user-account-details"><a name="users_update"></a>Update a user account details</h2>

<blockquote>
<p>Request body</p>
</blockquote>
<pre class="highlight plaintext"><code>{
 "data": {
    "type": "users",
    "id": "5",
    "attributes": {
        "email": "updated@email.com",
        "username": "updated_username",
        "password": "newpassword",
        "password_confirmation": "newpassword",
        "role": "editor",
        "given_names": "Updated",
        "family_name": "Name",
        "gender": "male",
        "birthday": "1985-07-20",
        "base64_file": "data:image/gif;base64,R0lGODlhBQAFAIAAAAAAAP///ywAAAAABQAFAAACBIyPqVgAOw==",
      "remove_avatar": "false"
    },
    "relationships": {
      "country": {
        "data": {
          "id": "5",
          "type": "places"
        }
      }
    }
  }
}
</code></pre>
<blockquote>
<p>HTTP 200 response body</p>
</blockquote>
<pre class="highlight plaintext"><code>{
  "data": {
    "id": "5",
    "type": "users",
    "attributes": {
      "email": "updated@email.com",
      "username": "updated_username",
      "role": "editor",
      "given_names": "Updated",
      "family_name": "Name",
      "gender": "male",
      "avatar": "https://dbljumpheroku.s3.amazonaws.com/uploads/user_avatar/5/1703301248.gif",
      "birthday": "1985-07-20",
      "jwt": null
    },
    "relationships": {
      "country": {
        "data": {
          "id": "5",
          "type": "places"
        },
        "links": {
          "related": "http://api.dbljump.com/places/countries/andorra"
        }
      },
      "images": {
        "links": {
          "related": "http://api.dbljump.com/users/5/images"
        }
      }
    },
    "links": {
      "self": "http://api.dbljump.com/users/5"
    }
  },
  "included": [
    {
      "id": "5",
      "type": "places",
      "attributes": {
        "subtype": "countries",
        "slug": "andorra",
        "name": "Andorra",
        "short_name": null,
        "formatted": "Andorra"
      },
      "links": {
        "self": "http://api.dbljump.com/places/countries/andorra"
      }
    }
  ],
  "meta": {
    "keywords": "updated_username, updated name, user, dbljump, video games, pc games, gaming",
    "description": "Updated Name is a member at Dbljump, the video game reference.",
    "created_at": "2017-03-30T12:46:04.648Z",
    "updated_at": "2017-03-30T12:48:40.380Z",
    "last_signed_in_at": null,
    "last_sign_in_ip": null,
    "sign_in_count": 0,
    "activated_at": null
  }
}
</code></pre>
<p>Update an existing user account. A user can update their own account. An admin can update any other non-admin account.</p>

<p>Admin-level authorization is required to update attributes role.</p>

<ul>
<li>User authentication: required</li>
<li>Authorization level: Any if editing own account. Admin if editing other user&rsquo;s account. Admin-level accounts can only be edited by the account owner.</li>
</ul>

<h3 id="http-request">HTTP request</h3>

<p><code class="prettyprint">PATCH /users/{id}</code> (replace <code class="prettyprint">{id}</code> with user record ID)</p>

<h3 id="request-attributes">Request attributes</h3>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Req&rsquo;d</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>username</td>
<td>string</td>
<td>Y</td>
<td>Must be unique. 2-24 chars. Letters, numbers and underscores only. See <a href="#user_username">Username</a>.</td>
</tr>
<tr>
<td>email</td>
<td>string</td>
<td>Y</td>
<td>Must be unique. Max 255 chars. Email format only. Downcased on save. See <a href="#user_email">Email</a>.</td>
</tr>
<tr>
<td>role</td>
<td>string</td>
<td></td>
<td>Authorization level. Defaults to <code class="prettyprint">member</code>. Can only be updated by admin users. See <a href="#user_role">Role</a>.</td>
</tr>
<tr>
<td>password</td>
<td>string</td>
<td>Y</td>
<td>New password. Any 8-24 chars.</td>
</tr>
<tr>
<td>password_confirmation</td>
<td>string</td>
<td>Y</td>
<td>Required if changing password. Must match password.</td>
</tr>
<tr>
<td>given_names</td>
<td>string</td>
<td></td>
<td>Any 1-20 chars.</td>
</tr>
<tr>
<td>family_name</td>
<td>string</td>
<td></td>
<td>Any 1-20 chars.</td>
</tr>
<tr>
<td>gender</td>
<td>string</td>
<td></td>
<td>Any 1-20 chars. Client could suggest &lsquo;male&rsquo; or &#39;female&rsquo;.</td>
</tr>
<tr>
<td>birthday</td>
<td>date</td>
<td></td>
<td>Format &#39;YYYY-MM-DD&rsquo;. Must not be a future date or &gt; 100 years ago.</td>
</tr>
<tr>
<td>base64_file</td>
<td>string</td>
<td></td>
<td>Base64 encoded JPEG, GIF or PNG. Any size (needs review). Use to upload <code class="prettyprint">avatar</code>.</td>
</tr>
<tr>
<td>remove_avatar</td>
<td>boolean</td>
<td></td>
<td>Set as true to remove the avatar.</td>
</tr>
</tbody></table>

<h3 id="relationships">Relationships</h3>

<p>Check this section&rsquo;s code example to see how to update these relationships.</p>

<table><thead>
<tr>
<th>Name</th>
<th>Relationship</th>
<th>Req&rsquo;d?</th>
<th>JSON:API type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>country</td>
<td>belongs_to</td>
<td></td>
<td>places</td>
<td>A <a href="#countries_intro">country record</a>, e.g. the user&rsquo;s birth country.</td>
</tr>
</tbody></table>

<h3 id="role"><a name="user_role"></a>Role</h3>

<p>Dbljump has three kinds of users, representing three levels of authorization. They are defined by the value of the <code class="prettyprint">role</code> attribute, which has three possible values.</p>

<table><thead>
<tr>
<th>Value</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>member</td>
<td>Ordinary users who sign up at Dbljump.com. No special privileges.</td>
</tr>
<tr>
<td>editor</td>
<td>Can edit and create records. Must complete an approval process.</td>
</tr>
<tr>
<td>admin</td>
<td>The highest level of authorization. Can do everything.</td>
</tr>
</tbody></table>

<h3 id="success-http-response-code">Success HTTP response code</h3>

<p><code class="prettyprint">200 OK</code></p>

          <h2 id="delete-a-user-account">Delete a user account</h2>

<p>Delete an existing user account. A user can delete their own account. An admin can delete any other non-admin account.</p>

<ul>
<li>User authentication: required</li>
<li>Authorization level: Any, if deleting own account. Admin if deleting other user&rsquo;s account. Admin-level accounts can only be deleted by the account owner.</li>
</ul>

<h3 id="http-request">HTTP request</h3>

<p><code class="prettyprint">DELETE /users/{id}</code> (replace <code class="prettyprint">{id}</code> with user record ID)</p>

<h3 id="success-http-response-code">Success HTTP response code</h3>

<p><code class="prettyprint">204 No Content</code></p>

          <h2 id="user-images-get-all">User images: get all</h2>

<blockquote>
<p>HTTP 200 response body</p>
</blockquote>
<pre class="highlight plaintext"><code>{
  "data": [
    {
      "id": "2",
      "type": "images",
      "attributes": {
        "subtype": "photos",
        "slug": "mario-figure-2016-uncategorized",
        "file": "https://dbljumpheroku.s3.amazonaws.com/uploads/images/2/mario-figure.jpg",
        "kind": "uncategorized",
        "title": "Mario figure",
        "description": "",
        "year": 2016,
        "date": "2016-07-30",
        "usage_type": "free",
        "usage_license_code": null,
        "usage_license_name": null,
        "usage_license_url": null,
        "attributed_name": null,
        "attributed_url": null,
        "source_url": ""
      },
      "relationships": {
        "uploaded_by": {
          "data": {
            "id": "1",
            "type": "users"
          },
          "links": {
            "related": "http://api.dbljump.com/users/1"
          }
        },
        "place": {
          "data": null
        }
      },
      "links": {
        "self": "http://api.dbljump.com/images/mario-figure-2016-uncategorized"
      }
    },
    {
      "id": "1",
      "type": "images",
      "attributes": {
        "subtype": "photos",
        "slug": "nintendo-office-2006-uncategorized-moja-commonswiki",
        "file": "https://dbljumpheroku.s3.amazonaws.com/uploads/images/1/nintendo-hq-kyoto-2006.jpg",
        "kind": "uncategorized",
        "title": "Nintendo office",
        "description": "Head Quarters of Nintendo, Minami-ku, Kyoto, Japan. The picture was taken by the poster in February, 2006.",
        "year": 2006,
        "date": "2006-02-18",
        "usage_type": "licensed",
        "usage_license_code": "cc_by_sa_3_0",
        "usage_license_name": "Creative Commons Attribution-ShareAlike 3.0",
        "usage_license_url": "https://creativecommons.org/licenses/by-sa/3.0",
        "attributed_name": "Moja~commonswiki",
        "attributed_url": "",
        "source_url": "https://en.wikipedia.org/wiki/Nintendo#/media/File:Nintendo_office.jpg"
      },
      "relationships": {
        "uploaded_by": {
          "data": {
            "id": "1",
            "type": "users"
          },
          "links": {
            "related": "http://api.dbljump.com/users/1"
          }
        },
        "place": {
          "data": null
        }
      },
      "links": {
        "self": "http://api.dbljump.com/images/nintendo-office-2006-uncategorized-moja-commonswiki"
      }
    }
  ],
  "links": {},
  "meta": {
    "total_items": 2
  }
}
</code></pre>
<p>Retrieve all images uploaded by the given user. Automatically paginated.</p>

<ul>
<li>User authentication: not required</li>
<li>Authorization level: n/a</li>
</ul>

<h3 id="http-request">HTTP request</h3>

<p><code class="prettyprint">GET /users/{user_id}/images</code> (replace <code class="prettyprint">{user_id}</code> with country record slug)</p>

<h3 id="url-query-parameters">URL query parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>fields[{record-type}]</td>
<td>All fields</td>
<td>Return only specified fields, e.g. <code class="prettyprint">?fields[images]=file,title</code></td>
</tr>
<tr>
<td>filter[{field}]</td>
<td>All records</td>
<td>Filter search by field, e.g. <code class="prettyprint">?filter[kind]=logo</code></td>
</tr>
<tr>
<td>page[number]</td>
<td>1</td>
<td>Select the page number, e.g. <code class="prettyprint">?page[number]=3</code></td>
</tr>
<tr>
<td>page[size]</td>
<td>30</td>
<td>Select the number of records per page, e.g. <code class="prettyprint">?page[size]=20</code></td>
</tr>
</tbody></table>

<h3 id="success-http-response-code">Success HTTP response code</h3>

<p><code class="prettyprint">200 OK</code></p>

          <h2 id="errors">Errors</h2>

<p>Errors specific to registering, updating and authenticating user accounts.</p>

<h3 id="post-and-patch-errors">POST and PATCH errors</h3>

<table><thead>
<tr>
<th>HTTP code</th>
<th>Error code</th>
<th>Pointer</th>
<th>Title</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>USER_USERNAME_BLANK</td>
<td>username</td>
<td>Username is required.</td>
</tr>
<tr>
<td>400</td>
<td>USER_USERNAME_INVALID</td>
<td>username</td>
<td>Username can only contain letters, numbers, and underscores.</td>
</tr>
<tr>
<td>400</td>
<td>USER_USERNAME_TAKEN</td>
<td>username</td>
<td>Username has already been taken.</td>
</tr>
<tr>
<td>400</td>
<td>USER_USERNAME_TOO_SHORT</td>
<td>username</td>
<td>Username cannot be less than 2 characters.</td>
</tr>
<tr>
<td>400</td>
<td>USER_USERNAME_TOO_LONG</td>
<td>username</td>
<td>Username cannot be more than 24 characters.</td>
</tr>
<tr>
<td>400</td>
<td>USER_EMAIL_BLANK</td>
<td>email</td>
<td>Email is required.</td>
</tr>
<tr>
<td>400</td>
<td>USER_EMAIL_INVALID</td>
<td>email</td>
<td>Email must be a valid address.</td>
</tr>
<tr>
<td>400</td>
<td>USER_EMAIL_TAKEN</td>
<td>email</td>
<td>Email has already been taken.</td>
</tr>
<tr>
<td>400</td>
<td>USER_EMAIL_TOO_LONG</td>
<td>email</td>
<td>Username cannot be more than 255 characters.</td>
</tr>
<tr>
<td>400</td>
<td>USER_ROLE_INVALID</td>
<td>role</td>
<td>Role must be &lsquo;member&rsquo;, &#39;editor&rsquo;, or &#39;admin&rsquo;.</td>
</tr>
<tr>
<td>400</td>
<td>USER_PASSWORD_BLANK</td>
<td>password</td>
<td>Password is required.</td>
</tr>
<tr>
<td>400</td>
<td>USER_PASSWORD_TOO_SHORT</td>
<td>password</td>
<td>Password cannot be less than 8 characters.</td>
</tr>
<tr>
<td>400</td>
<td>USER_PASSWORD_TOO_LONG</td>
<td>password</td>
<td>Password cannot be more than 24 characters.</td>
</tr>
<tr>
<td>400</td>
<td>USER_PASSWORD_CONFIRMATION_CONFIRMATION</td>
<td>password_confirmation</td>
<td>Password and confirmation must match.</td>
</tr>
<tr>
<td>400</td>
<td>USER_GIVEN_NAMES_TOO_LONG</td>
<td>given_names</td>
<td>Given name cannot be more than 20 characters.</td>
</tr>
<tr>
<td>400</td>
<td>USER_FAMILY_NAME_TOO_LONG</td>
<td>family_name</td>
<td>Family name cannot be more than 20 characters.</td>
</tr>
<tr>
<td>400</td>
<td>USER_GENDER_TOO_LONG</td>
<td>gender</td>
<td>Gender cannot be more than 20 characters.</td>
</tr>
<tr>
<td>400</td>
<td>USER_BIRTHDAY_INCLUSION</td>
<td>birthday</td>
<td>Birthday must not be a future date, or over 100 years ago.</td>
</tr>
<tr>
<td>400</td>
<td>USER_COUNTRY_ID_INVALID</td>
<td>relationships/country/data/id</td>
<td>Country must be valid.</td>
</tr>
<tr>
<td>400</td>
<td>USER_BASE64_FILE_INVALID</td>
<td>base64_file</td>
<td>Base64 file must be in the correct format.</td>
</tr>
</tbody></table>

<h3 id="authentication-errors">Authentication errors</h3>

<table><thead>
<tr>
<th>HTTP code</th>
<th>Error code</th>
<th>Pointer</th>
<th>Title</th>
</tr>
</thead><tbody>
<tr>
<td>401</td>
<td>USER_CREDENTIALS_INVALID</td>
<td>-</td>
<td>User not authorized.</td>
</tr>
</tbody></table>

          <h1 id="users-authentications">Users: authentications</h1>

<p>Resources related to user sign-ins.</p>

<h3 id="json-web-tokens-jwt">JSON web tokens (JWT)</h3>

<p>This API uses stateless <a href="https://jwt.io" target="_blank">JSON web tokens (JWT)</a> for authentication. Sessions are not used.</p>

<p>It works like this:</p>

<ol>
<li>The client sends a user&rsquo;s valid credentials to the API, and receives a JWT in the response body.</li>
<li>The client stores this JWT and sends it in the HTTP <code class="prettyprint">Authorization</code> header with each subsequent request.</li>
<li>To sign out the user, the client simply stops sending the JWT in the HTTP <code class="prettyprint">Authorization</code> header.</li>
</ol>

<h3 id="jwt-payload">JWT payload</h3>

<p>The JWT has a payload with the following attributes, which the client can decode:</p>

<table><thead>
<tr>
<th>Attribute</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>user_id</td>
<td>The user record ID.</td>
</tr>
<tr>
<td>user_role</td>
<td>Used for authorization. Can be <code class="prettyprint">member</code>, <code class="prettyprint">editor</code> or <code class="prettyprint">admin</code>. Also see <a href="#user_role">Role</a>.</td>
</tr>
<tr>
<td>expiry</td>
<td>Date and time of expiry.</td>
</tr>
</tbody></table>

          <h2 id="sign-in-a-user">Sign in a user</h2>

<blockquote>
<p>Request body</p>
</blockquote>
<pre class="highlight plaintext"><code>{
 "data": {
    "type": "users",
    "attributes": {
        "email": "neil@example.com",
        "password": "password",
      "remember_me": "true"
    }
  }
}
</code></pre>
<blockquote>
<p>HTTP 200 response body</p>
</blockquote>
<pre class="highlight plaintext"><code>{
  "data": {
    "id": "2",
    "type": "users",
    "attributes": {
      "email": "neil@example.com",
      "username": "neil",
      "role": "admin",
      "given_names": "Neil",
      "family_name": "Wheatley",
      "gender": "male",
      "avatar": "https://dbljumpheroku.s3.amazonaws.com/uploads/user_avatar/2/1703301240.jpg",
      "birthday": "1980-02-14",
      "jwt": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ1c2VyX2lkIjoyLCJ1c2VyX3JvbGUiOiJhZG1pbiIsImV4cGlyeSI6IjIwMTctMDQtMjkgMTI6NTU6MTggKzAwMDAifQ.OL6jcolUQtB-lJy5_d8iisobc_Dqyi35b2Dkxs69lhw"
    },
    "relationships": {
      "country": {
        "data": {
          "id": "219",
          "type": "places"
        },
        "links": {
          "related": "http://api.dbljump.com/places/countries/united-kingdom"
        }
      },
      "images": {
        "links": {
          "related": "http://api.dbljump.com/users/2/images"
        }
      }
    },
    "links": {
      "self": "http://api.dbljump.com/users/2"
    }
  },
  "included": [
    {
      "id": "219",
      "type": "places",
      "attributes": {
        "subtype": "countries",
        "slug": "united-kingdom",
        "name": "United Kingdom",
        "short_name": "UK",
        "formatted": "United Kingdom"
      },
      "links": {
        "self": "http://localhost:3000/places/countries/united-kingdom"
      }
    }
  ],
  "meta": {
    "last_signed_in_at": "2017-03-30T12:55:18.073Z",
    "last_sign_in_ip": "86.12.129.15",
    "sign_in_count": 2,
    "activated_at": "2017-03-30T12:40:07.621Z"
  }
}
</code></pre>
<p>Sign in an existing user. With valid credentials, returns a JSON web token (JWT) used to authenticate user requests.</p>

<ul>
<li>User authentication: not required</li>
<li>Authorization level: N/A</li>
</ul>

<h3 id="http-request">HTTP request</h3>

<p><code class="prettyprint">POST /users/authentications</code></p>

<h3 id="request-attributes">Request attributes</h3>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Req&rsquo;d?</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>email</td>
<td>string</td>
<td>Y</td>
<td>The user&rsquo;s registered email. Max 255 chars. Must be email format.</td>
</tr>
<tr>
<td>password</td>
<td>string</td>
<td>Y</td>
<td>The user&rsquo;s password.</td>
</tr>
<tr>
<td>remember_me</td>
<td>boolean</td>
<td></td>
<td>JWT authentication token expires in 30 days if <code class="prettyprint">true</code>, 1 day if <code class="prettyprint">false</code>. Defaults to <code class="prettyprint">false</code>.</td>
</tr>
</tbody></table>

<h3 id="success-http-response-code">Success HTTP response code</h3>

<p><code class="prettyprint">200 OK</code></p>

<h3 id="response-attributes">Response attributes</h3>

<p>See the table in <a href="#users_show">Get single user</a> for all attribute details.</p>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Req&rsquo;d?</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>jwt</td>
<td>string</td>
<td>Y</td>
<td>The JSON web token used for authentication. Should be added to the HTTP <code class="prettyprint">Authorization</code> header in further requests until user is signed out.</td>
</tr>
</tbody></table>

          <h1 id="users-activations">Users: activations</h1>

<p>Resources related to user account activations.</p>

<h3 id="how-activations-work">How activations work</h3>

<p>A new user cannot sign in until they activate their account. Activations work like this:</p>

<ol>
<li>When a user signs up for a new account, they receive an email with a link they must follow to activate their account.</li>
<li>The link contains an activation token and the user&rsquo;s email. Clicking the link passes these to the API.</li>
<li>On successful activation, the API sets the user attribute <code class="prettyprint">activated_at</code> to the current time, and returns a JWT the client can use to sign in the activated user.</li>
<li>If the user loses their activation email/link, or if it has expired, they can request a new one.</li>
</ol>

          <h2 id="send-a-new-activation-email">Send a new activation email</h2>

<blockquote>
<p>Request body</p>
</blockquote>
<pre class="highlight plaintext"><code>{
  "data": {
    "type": "user_activations",
    "attributes": {
      "email": "user@example.com"
    }
  }
}

</code></pre>
<p>Send a new account activation link by email to a user&rsquo;s registered email address.</p>

<ul>
<li>User authentication: not required</li>
<li>Authorization level: N/A</li>
</ul>

<h3 id="http-request">HTTP request</h3>

<p><code class="prettyprint">POST /users/activations</code></p>

<h3 id="request-attributes">Request attributes</h3>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Req&rsquo;d</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>email</td>
<td>string</td>
<td>The user&rsquo;s registered email address.</td>
<td></td>
</tr>
</tbody></table>

<h3 id="success-http-response-code">Success HTTP response code</h3>

<p><code class="prettyprint">204 No Content</code></p>

<h3 id="errors">Errors</h3>

<p>Errors specific to user activation link requests.</p>

<table><thead>
<tr>
<th>HTTP code</th>
<th>Error code</th>
<th>Pointer</th>
<th>Title</th>
<th>Detail</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>USER_EMAIL_INVALID</td>
<td>email</td>
<td>User not found.</td>
<td>Invalid email address.</td>
</tr>
<tr>
<td>400</td>
<td>USER_ALREADY_ACTIVATED</td>
<td>email</td>
<td>Cannot activate user.</td>
<td>User already activated.</td>
</tr>
</tbody></table>

          <h2 id="activate-a-user-account">Activate a user account</h2>

<blockquote>
<p>Request body</p>
</blockquote>
<pre class="highlight plaintext"><code>{
  "data": {
    "type": "user_activations",
    "id": "G2MnBqMJVF43tffPmKrmnw",
    "attributes": {
      "email": "user@example.com"
    }
  }
}
</code></pre>
<blockquote>
<p>HTTP 200 response body</p>
</blockquote>
<pre class="highlight plaintext"><code>{
  "data": {
    "id": "5",
    "type": "users",
    "attributes": {
      "email": "user@example.com",
      "username": "new_user",
      "role": "member",
      "given_names": null,
      "family_name": null,
      "gender": null,
      "avatar": null,
      "birthday": null,
      "jwt": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ1c2VyX2lkIjo1LCJ1c2VyX3JvbGUiOiJtZW1iZXIiLCJleHBpcnkiOiIyMDE3LTAzLTIyIDIzOjU1OjMyICswMDAwIn0.WqLjZkgyEh3Trv2U9q2PDBkbY4toWPJx02zbqTSn540"
    },
    "relationships": {
      "country": {
        "data": {
          "id": "5",
          "type": "places"
        },,
        "links": {
          "related": "http://api.dbljump.com/places/countries/andorra"
        }
      },
      "images": {
        "links": {
          "related": "http://api.dbljump.com/users/5/images"
        }
      }
    },
    "links": {
      "self": "http://api.dbljump.com/users/5"
    }
  },
  "included": [
  {
    "id": "5",
    "type": "places",
    "attributes": {
      "subtype": "countries",
      "slug": "andorra",
      "name": "Andorra",
      "short_name": null,
      "formatted": "Andorra"
    },
    "links": {
      "self": "http://localhost:3000/places/countries/united-kingdom"
    }
  }
],
  "meta": {
    "last_signed_in_at": null,
    "last_sign_in_ip": null,
    "sign_in_count": 0,
    "activated_at": "2017-03-21T23:55:32.873Z"
  }
}
</code></pre>
<p>Activate a user account. This endpoint should be triggered by an activation link sent to the user by email. The response includes a JWT authentication token, which can be used to automatically sign in the user.</p>

<ul>
<li>User authentication: not required</li>
<li>Authorization level: N/A</li>
</ul>

<h3 id="http-request">HTTP request</h3>

<p><code class="prettyprint">PATCH /users/activations/{activation_token}</code> (replace <code class="prettyprint">{activation_token}</code> with the user&rsquo;s activation token)</p>

<h3 id="request-attributes">Request attributes</h3>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>string</td>
<td>User activation token. Provided in the activation link.</td>
</tr>
<tr>
<td>email</td>
<td>string</td>
<td>The user&rsquo;s registered email. Provided in the activation link.</td>
</tr>
</tbody></table>

<h3 id="success-http-response-code">Success HTTP response code</h3>

<p><code class="prettyprint">200 OK</code></p>

<h3 id="response-attributes">Response attributes</h3>

<p>See the table in <a href="#users_show">Get single user</a> for all attribute details.</p>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Req&rsquo;d?</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>jwt</td>
<td>string</td>
<td>Y</td>
<td>The JSON web token used for authentication. Should be added to the HTTP <code class="prettyprint">Authorization</code> header in further requests until user is signed out.</td>
</tr>
</tbody></table>

<h3 id="errors">Errors</h3>

<p>Errors specific to user activations.</p>

<table><thead>
<tr>
<th>HTTP code</th>
<th>Error code</th>
<th>Pointer</th>
<th>Title</th>
<th>Detail</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>USER_ACTIVATION_INVALID</td>
<td>N/A</td>
<td>Cannot activate user.</td>
<td>Invalid user or activation token.</td>
</tr>
<tr>
<td>400</td>
<td>USER_ALREADY_ACTIVATED</td>
<td>email</td>
<td>Cannot activate user.</td>
<td>User already activated.</td>
</tr>
</tbody></table>

          <h1 id="users-passwords">Users: passwords</h1>

<p>Resources related to user passwords.</p>

<p>If a user needs a new password, they can:</p>

<ol>
<li>Enter their registered email address and receive a password-reset link by email</li>
<li>Set a new password after clicking the password-reset email</li>
</ol>

          <h2 id="request-a-password-reset-link">Request a password-reset link</h2>

<blockquote>
<p>Request body</p>
</blockquote>
<pre class="highlight plaintext"><code>{
  "data": {
    "type": "user_passwords",
    "attributes": {
      "email": "user@example.com"
    }
  }
}
</code></pre>
<p>A user can request an email with a link to reset their password.</p>

<ul>
<li>User authentication: not required</li>
<li>Authorization level: N/A</li>
</ul>

<h3 id="http-request">HTTP request</h3>

<p><code class="prettyprint">POST /users/passwords</code></p>

<h3 id="request-attributes">Request attributes</h3>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>email</td>
<td>string</td>
<td>The user&rsquo;s registered email. Required. Max 255 chars. Must be email format.</td>
</tr>
</tbody></table>

<h3 id="success-http-response-code">Success HTTP response code</h3>

<p><code class="prettyprint">204 No Content</code></p>

<h3 id="errors">Errors</h3>

<p>Errors specific to user password reset link requests.</p>

<table><thead>
<tr>
<th>HTTP code</th>
<th>Error code</th>
<th>Pointer</th>
<th>Title</th>
<th>Detail</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>USER_EMAIL_INVALID</td>
<td>email</td>
<td>User not found.</td>
<td>Invalid email address.</td>
</tr>
<tr>
<td>400</td>
<td>USER_ACTIVATION_REQUIRED</td>
<td>email</td>
<td>User activation required.</td>
<td>User not yet activated.</td>
</tr>
</tbody></table>

          <h2 id="set-a-new-user-password">Set a new user password</h2>

<blockquote>
<p>Request body</p>
</blockquote>
<pre class="highlight plaintext"><code>{
  "data": {
    "type": "user_passwords",
    "id": "Bml5G2MnBqMJVFacD243tffPmKrmnwX",
    "attributes": {
      "email": "user@example.com",
      "password": "new_password",
      "password_confirmation": "new_password"
    }
  }
}
</code></pre>
<p>A user can set a new password after following a reset-password link. The reset token in the link expires after 2 hours.</p>

<ul>
<li>User authentication: not required</li>
<li>Authorization level: N/A</li>
</ul>

<h3 id="http-request">HTTP request</h3>

<p><code class="prettyprint">PATCH /users/passwords/{password_reset_token}</code> (replace <code class="prettyprint">{password_reset_token}</code> with the password reset token)</p>

<h3 id="request-attributes">Request attributes</h3>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>string</td>
<td>The password reset token, available in the password reset link URL. Required.</td>
</tr>
<tr>
<td>email</td>
<td>string</td>
<td>The user&rsquo;s registered email address, available in the password reset link URL. Required.</td>
</tr>
<tr>
<td>password</td>
<td>string</td>
<td>New password. Required. Any 8-24 chars.</td>
</tr>
<tr>
<td>password_confirmation</td>
<td>string</td>
<td>Required. Must match password.</td>
</tr>
</tbody></table>

<h3 id="success-http-response-code">Success HTTP response code</h3>

<p><code class="prettyprint">204 No Content</code></p>

<h3 id="errors">Errors</h3>

<p>Errors specific to user password resets.</p>

<table><thead>
<tr>
<th>HTTP code</th>
<th>Error code</th>
<th>Pointer</th>
<th>Title</th>
<th>Detail</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>USER_EMAIL_INVALID</td>
<td>email</td>
<td>User not found.</td>
<td>Invalid email address.</td>
</tr>
<tr>
<td>400</td>
<td>USER_ACTIVATION_REQUIRED</td>
<td>email</td>
<td>User activation required.</td>
<td>User not yet activated.</td>
</tr>
<tr>
<td>400</td>
<td>USER_PASSWORD_TOKEN_INVALID</td>
<td>password_reset_token</td>
<td>Cannot reset user password.</td>
<td>Password reset token invalid.</td>
</tr>
<tr>
<td>400</td>
<td>USER_PASSWORD_TOKEN_EXPIRED</td>
<td>password_reset_token</td>
<td>Cannot reset user password.</td>
<td>Password reset token expired.</td>
</tr>
<tr>
<td>400</td>
<td>USER_PASSWORD_BLANK</td>
<td>password</td>
<td>Password is required.</td>
<td></td>
</tr>
<tr>
<td>400</td>
<td>USER_PASSWORD_TOO_SHORT</td>
<td>password</td>
<td>Password cannot be less than 8 characters.</td>
<td></td>
</tr>
<tr>
<td>400</td>
<td>USER_PASSWORD_TOO_LONG</td>
<td>password</td>
<td>Password cannot be more than 24 characters.</td>
<td></td>
</tr>
<tr>
<td>400</td>
<td>USER_PASSWORD_CONFIRMATION_CONFIRMATION</td>
<td>password_confirmation</td>
<td>Password and confirmation must match.</td>
<td></td>
</tr>
</tbody></table>

          <h1 id="images"><a name="images_intro"></a>Images</h1>

<p>Resources related to images.</p>

<p>An image record includes the URL of an image stored on Amazon S3, plus metadata about the image. An image can be associated with many articles (i.e. games, companies and people).</p>

<h3 id="request-attributes">Request attributes</h3>

<p>See <a href="#images_create">Upload a new image</a> and <a href="#images_update">Update an image record</a>.</p>

<h3 id="response-attributes">Response attributes</h3>

<p>See <a href="#images_show">Get single image</a></p>

          <h2 id="get-all-images">Get all images</h2>

<blockquote>
<p>HTTP 200 response body</p>
</blockquote>
<pre class="highlight plaintext"><code>{
  "data": [
    {
      "id": "1",
      "type": "images",
      "attributes": {
        "slug": "nintendo-office-2006-uncategorized-moja-commonswiki",
        "file": "url": "https://dbljumpheroku.s3.amazonaws.com/uploads/images/1/nintendo-hq-kyoto-2006.jpg",
        "kind": "photo",
        "title": "Nintendo office",
        "description": "Head Quarters of Nintendo, Minami-ku, Kyoto, Japan. The picture was taken by the poster in February, 2006.",
        "year": 2006,
        "date": "2006-02-18",
        "usage_type": "licensed",
        "usage_license_code": "cc_by_sa_3_0",
        "usage_license_name": "Creative Commons Attribution-ShareAlike 3.0",
        "usage_license_url": "https://creativecommons.org/licenses/by-sa/3.0",
        "attributed_name": "Moja~commonswiki",
        "attributed_url": "",
        "source_url": "https://en.wikipedia.org/wiki/Nintendo#/media/File:Nintendo_office.jpg"
      },
      "relationships": {
        "uploaded_by": {
          "data": {
            "id": "1",
            "type": "users"
          },
          "links": {
            "related": "http://api.dbljump.com/users/1"
          }
        },
        "place": {
          "data": null
        }
      },
      "links": {
        "self": "http://api.dbljump.com/images/nintendo-office-2006-uncategorized-moja-commonswiki"
      }
    },
    {
      "id": "2",
      "type": "images",
      "attributes": {
        "slug": "mario-figure-2016-uncategorized",
        "file": "url": "https://dbljumpheroku.s3.amazonaws.com/uploads/images/2/mario-figure.jpg",
        "kind": "photo",
        "title": "Mario figure",
        "description": "",
        "year": 2016,
        "date": "2016-07-30",
        "usage_type": "free",
        "usage_license_code": null,
        "usage_license_name": null,
        "usage_license_url": null,
        "attributed_name": null,
        "attributed_url": null,
        "source_url": ""
      },
      "relationships": {
        "uploaded_by": {
          "data": {
            "id": "1",
            "type": "users"
          },
          "links": {
            "related": "http://api.dbljump.com/users/1"
          }
        },
        "place": {
          "data": null
        }
      },
      "links": {
        "self": "http://api.dbljump.com/images/mario-figure-2016-uncategorized"
      }
    }
  ],
  "links": {},
  "meta": {
    "total_items": 2
  }
}
</code></pre>
<p>Retrieve all images. Automatically paginated.</p>

<ul>
<li>User authentication: not required</li>
<li>Authorization level: n/a</li>
</ul>

<h3 id="http-request">HTTP request</h3>

<p><code class="prettyprint">GET /images</code></p>

<h3 id="url-query-parameters">URL query parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>fields[{record-type}]</td>
<td>All fields</td>
<td>Return only specified fields, e.g. <code class="prettyprint">?fields[images]=file,title</code></td>
</tr>
<tr>
<td>filter[{field}]</td>
<td>All records</td>
<td>Filter search by field, e.g. <code class="prettyprint">?filter[kind]=logo</code></td>
</tr>
<tr>
<td>page[number]</td>
<td>1</td>
<td>Select the page number, e.g. <code class="prettyprint">?page[number]=3</code></td>
</tr>
<tr>
<td>page[size]</td>
<td>30</td>
<td>Select the number of records per page, e.g. <code class="prettyprint">?page[size]=20</code></td>
</tr>
</tbody></table>

<h3 id="success-http-response-code">Success HTTP response code</h3>

<p><code class="prettyprint">200 OK</code></p>

          <h2 id="get-single-image"><a name="images_show"></a>Get single image</h2>

<blockquote>
<p>HTTP 200 response body</p>
</blockquote>
<pre class="highlight plaintext"><code>{
  "data": {
    "id": "2",
    "type": "images",
    "attributes": {
      "slug": "mario-figure-2016-uncategorized",
      "file": "url": "https://dbljumpheroku.s3.amazonaws.com/uploads/images/2/mario-figure.jpg",
      "kind": "photo",
      "title": "Mario figure",
      "description": "",
      "year": 2016,
      "date": "2016-07-30",
      "usage_type": "free",
      "usage_license_code": null,
      "usage_license_name": null,
      "usage_license_url": null,
      "attributed_name": null,
      "attributed_url": null,
      "source_url": ""
    },
    "relationships": {
      "uploaded_by": {
        "data": {
          "id": "1",
          "type": "users"
        },
        "links": {
          "related": "http://api.dbljump.com/users/1"
        }
      },
      "place": {
        "data": null
      }
    },
    "links": {
      "self": "http://api.dbljump.com/images/mario-figure-2016-uncategorized"
    }
  },
  "included": [
    {
      "id": "1",
      "type": "users",
      "attributes": {
        "username": "tikithekiwi",
        "role": "admin",
        "given_names": "Tiki",
        "family_name": "the Kiwi",
        "avatar": null
      },
      "links": {
        "self": "http://api.dbljump.com/users/1"
      }
    }
  ],
  "meta": {
    "keywords": "mario figure, 2016, 2016-07-30, photo, image, picture, media, dbljump, video games, pc games, gaming",
    "description": "'Mario figure' is a video game image at Dbljump.",
    "created_at": "2017-03-30T12:40:13.387Z",
    "updated_at": "2017-03-30T12:40:13.387Z"
  }
}
</code></pre>
<p>Retrieve a single image record. Images are publicly available. No sign-in is required.</p>

<ul>
<li>User authentication: not required</li>
<li>Authorization level: n/a</li>
</ul>

<h3 id="http-request">HTTP request</h3>

<p><code class="prettyprint">GET /images/{slug}</code> (replace <code class="prettyprint">{slug}</code> with image record slug)</p>

<h3 id="success-http-response-code">Success HTTP response code</h3>

<p><code class="prettyprint">200 OK</code></p>

<h3 id="response-attributes"><a name="image_response_attrs"></a>Response attributes</h3>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Req&rsquo;d?</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>file</td>
<td>string</td>
<td>Y</td>
<td>Image URL, usually at AWS.</td>
</tr>
<tr>
<td>slug</td>
<td>string</td>
<td>Y</td>
<td>A record ID based on metadata, e.g. &lsquo;photo-of-hideo-kojima&rsquo;.</td>
</tr>
<tr>
<td>kind</td>
<td>string</td>
<td>Y</td>
<td>See <a href="#image_kind">Kind</a>.</td>
</tr>
<tr>
<td>title</td>
<td>string</td>
<td>Y</td>
<td>The image title.</td>
</tr>
<tr>
<td>description</td>
<td>string</td>
<td></td>
<td>The image description.</td>
</tr>
<tr>
<td>year</td>
<td>integer</td>
<td></td>
<td>Year the image was created.</td>
</tr>
<tr>
<td>date</td>
<td>date</td>
<td></td>
<td>Date the image was created.</td>
</tr>
<tr>
<td>usage_type</td>
<td>string</td>
<td>Y</td>
<td>One of three usage types:&#39;free&rsquo;, &#39;fair&rsquo;, or &#39;licensed&rsquo;. See <a href="#image_usage_type">Usage type</a>.</td>
</tr>
<tr>
<td>usage_license_code</td>
<td>string</td>
<td>*</td>
<td>Req&rsquo;d if usage_type is &#39;licensed&rsquo;. See <a href="#image_usage_license">Usage license</a> section.</td>
</tr>
<tr>
<td>attributed_name</td>
<td>string</td>
<td>*</td>
<td>The image owner&rsquo;s name. Always present if usage_type is &#39;licensed&rsquo;.</td>
</tr>
<tr>
<td>attributed_url</td>
<td>string</td>
<td></td>
<td>The image owner&rsquo;s website URL.</td>
</tr>
<tr>
<td>source_url</td>
<td>string</td>
<td>*</td>
<td>The URL the image was sourced from. Always present if usage_type is &#39;licensed&rsquo;.</td>
</tr>
</tbody></table>

<h3 id="relationships">Relationships</h3>

<table><thead>
<tr>
<th>Association</th>
<th>Record type</th>
<th>Relationship type</th>
</tr>
</thead><tbody>
<tr>
<td>uploaded_by</td>
<td>users</td>
<td>belongs_to</td>
</tr>
<tr>
<td>place</td>
<td>places</td>
<td>belongs_to</td>
</tr>
</tbody></table>

<h3 id="included">Included</h3>

<table><thead>
<tr>
<th>Record type</th>
<th>Relationship</th>
<th>Attributes included</th>
</tr>
</thead><tbody>
<tr>
<td>users</td>
<td>uploaded_by</td>
<td>username, role, given_names, family_name, avatar</td>
</tr>
<tr>
<td>places</td>
<td>place</td>
<td>subtype, slug, name, short_name, formatted</td>
</tr>
</tbody></table>

<h3 id="meta">Meta</h3>

<p>The <code class="prettyprint">meta</code> section of the JSON response includes <code class="prettyprint">keywords</code>, <code class="prettyprint">description</code>, <code class="prettyprint">created_at</code> and <code class="prettyprint">updated_at</code> attributes.</p>

          <h2 id="upload-a-new-image"><a name="images_create"></a>Upload a new image</h2>

<blockquote>
<p>Request body</p>
</blockquote>
<pre class="highlight plaintext"><code>{
  "data": {
    "type": "images",
    "attributes": {
      "base64_file": "data:image/gif;base64,R0lGODlhBQAFAIAAAAAAAP///ywAAAAABQAFAAACBIyPqVgAOw==",
      "kind": "photo",
      "title": "Portrait of Takashi Tezuka",
      "description": "Takashi Tezuka in Kyoto on 2nd February 2017.",
      "year": "",
      "date": "2017-02-02",
      "usage_type": "licensed",
      "usage_license_code": "cc_by_4_0",
      "attributed_name": "Jonny Snapper",
      "attributed_url": "http://www.jonnys-game-pics.com",
      "source_url": "http://www.jonnys-game-pics.com/tezuka.jpg"
    },
    "relationships": {
      "place": {
        "data": {
          "id": "1",
          "type": "places"
        }
      }
    }
  }
}
</code></pre>
<blockquote>
<p>HTTP 201 response body</p>
</blockquote>
<pre class="highlight plaintext"><code>{
  "data": {
    "id": "3",
    "type": "images",
    "attributes": {
      "slug": "portrait-of-takashi-tezuka-2017-likeness-jonny-snapper",
      "file": "https://dbljumpheroku.s3.amazonaws.com/uploads/images/3/file.gif",
      "kind": "photo",
      "title": "Portrait of Takashi Tezuka",
      "description": "Takashi Tezuka in Kyoto on 2nd February 2017.",
      "year": 2017,
      "date": "2017-02-02",
      "usage_type": "licensed",
      "usage_license_code": "cc_by_4_0",
      "usage_license_name": "Creative Commons Attribution 4.0",
      "usage_license_url": "https://creativecommons.org/licenses/by/4.0",
      "attributed_name": "Jonny Snapper",
      "attributed_url": "http://www.jonnys-game-pics.com",
      "source_url": "http://www.jonnys-game-pics.com/tezuka.jpg"
    },
    "relationships": {
      "uploaded_by": {
        "data": {
          "id": "2",
          "type": "users"
        },
        "links": {
          "related": "http://api.dbljump.com/users/2"
        }
      },
      "place": {
        "data": {
          "id": "1",
          "type": "places"
        },
        "links": {
          "related": "http://api.dbljump.com/places/afghanistan"
        }
      }
    },
    "links": {
      "self": "http://api.dbljump.com/images/portrait-of-takashi-tezuka-2017-likeness-jonny-snapper"
    }
  },
  "included": [
    {
      "id": "2",
      "type": "users",
      "attributes": {
        "username": "neil",
        "role": "admin",
        "given_names": "Neil",
        "family_name": "Wheatley",
        "avatar": "https://dbljumpheroku.s3.amazonaws.com/uploads/user_avatar/2/1703301240.jpg"
      },
      "links": {
        "self": "http://api.dbljump.com/users/2"
      }
    },
    {
      "id": "1",
      "type": "places",
      "attributes": {
        "subtype": "countries",
        "slug": "afghanistan",
        "name": "Afghanistan",
        "short_name": null,
        "formatted": "Afghanistan"
      },
      "links": {
        "self": "http://api.dbljump.com/places/countries/afghanistan"
      }
    }
  ],
  "meta": {
    "keywords": "portrait of takashi tezuka, 2017, 2017-02-02, jonny snapper, photo, likeness, image, picture, media, dbljump, video games, pc games, gaming",
    "description": "'Portrait of Takashi Tezuka' is a video game image at Dbljump.",
    "created_at": "2017-03-30T13:16:18.639Z",
    "updated_at": "2017-03-30T13:16:18.639Z"
  }
}
</code></pre>
<p>Upload a new image. User must be an editor or admin.</p>

<ul>
<li>User authentication: required</li>
<li>Authorization level: admin</li>
</ul>

<h3 id="http-request">HTTP request</h3>

<p><code class="prettyprint">POST /images</code></p>

<h3 id="request-attributes">Request attributes</h3>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Req&rsquo;d?</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>base64_file</td>
<td>string</td>
<td>Y</td>
<td>Image file encoded as base64. See <a href="#image_file">File</a>.</td>
</tr>
<tr>
<td>kind</td>
<td>string</td>
<td>Y</td>
<td>See <a href="#image_kind">Kind</a>.</td>
</tr>
<tr>
<td>title</td>
<td>string</td>
<td>Y</td>
<td>Max 100 chars.</td>
</tr>
<tr>
<td>description</td>
<td>string</td>
<td></td>
<td>Max 250 chars.</td>
</tr>
<tr>
<td>year</td>
<td>integer</td>
<td></td>
<td>1800 to present year.</td>
</tr>
<tr>
<td>date</td>
<td>date</td>
<td></td>
<td>1800-01-01 to present year.</td>
</tr>
<tr>
<td>usage_type</td>
<td>string</td>
<td>Y</td>
<td>Must be &lsquo;free&rsquo;, &#39;fair&rsquo;, or &#39;licensed&rsquo;. See <a href="#image_usage_type">Usage type</a>.</td>
</tr>
<tr>
<td>usage_license_code</td>
<td>string</td>
<td>*</td>
<td>Req&rsquo;d if usage_type is &#39;licensed&rsquo;. See <a href="#image_usage_license">Usage license</a>.</td>
</tr>
<tr>
<td>attributed_name</td>
<td>string</td>
<td>*</td>
<td>Image owner&rsquo;s name. Max 100 chars. Req&rsquo;d if usage_type is &#39;licensed&rsquo;.</td>
</tr>
<tr>
<td>attributed_url</td>
<td>string</td>
<td></td>
<td>The owner&rsquo;s website. Max 250 chars.</td>
</tr>
<tr>
<td>source_url</td>
<td>string</td>
<td>*</td>
<td>Req&rsquo;d if usage_type is &#39;licensed&rsquo;. Max 250 chars. URL of image source.</td>
</tr>
</tbody></table>

<h3 id="relationships">Relationships</h3>

<p>Check this section&rsquo;s code example to see how to update these relationships.</p>

<table><thead>
<tr>
<th>Name</th>
<th>Relationship</th>
<th>Req&rsquo;d?</th>
<th>JSON:API type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>place</td>
<td>belongs_to</td>
<td></td>
<td>places</td>
<td>A <a href="#places_intro">place record</a> the image is associated with.</td>
</tr>
</tbody></table>

<h3 id="file"><a name="image_file"></a>File</h3>

<p><strong>File type:</strong> File uploads must be of type GIF, JPG/JPEG, or PNG.</p>

<p><strong>Base64:</strong> Image file uploads are handled by the Ruby gems <a href="https://github.com/carrierwaveuploader/carrierwave">CarrierWave</a> and <a href="https://github.com/lebedev-yury/carrierwave-base64">Carrierwave::Base64</a>. Base64 strings should have <a href="https://github.com/lebedev-yury/carrierwave-base64#data-format">the correct data format</a>, i.e.:</p>

<p><code class="prettyprint">data:image/jpeg;base64,(base64 encoded data)</code></p>

<h3 id="kind"><a name="image_kind"></a>Kind</h3>

<p>The <code class="prettyprint">kind</code> attribute accepts the following values.</p>

<table><thead>
<tr>
<th>Kind</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>artwork</td>
<td>Miscellaneous artwork, e.g. production design drawings or promotional art</td>
</tr>
<tr>
<td>boxart</td>
<td>Official box art from various regions</td>
</tr>
<tr>
<td>doc</td>
<td>Image of a document, e.g. a leaked presentation slide</td>
</tr>
<tr>
<td>logo</td>
<td>Usually a company or game logo</td>
</tr>
<tr>
<td>photo</td>
<td>A photograph</td>
</tr>
<tr>
<td>poster</td>
<td>A game poster</td>
</tr>
<tr>
<td>screen</td>
<td>A screenshot from a game</td>
</tr>
</tbody></table>

<h3 id="usage-type"><a name="image_usage_type"></a>Usage type</h3>

<p>Users should only upload images that can legally be shown on Dbljump.com. An image must therefore have one of three <code class="prettyprint">usage_type</code> values.</p>

<table><thead>
<tr>
<th>Usage type</th>
<th>usage_type value</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Free</td>
<td>free</td>
<td>The image is in the public domain and free to use without attribution.</td>
</tr>
<tr>
<td>Fair use</td>
<td>fair</td>
<td>The image can be used under US fair use law. May include logos, box-arts, and screenshots.</td>
</tr>
<tr>
<td>Licensed</td>
<td>licensed</td>
<td>The image is free to use with some-rights-reserved license, e.g. Creative Commons.</td>
</tr>
</tbody></table>

<h3 id="usage-license-attribute"><a name="image_usage_license"></a>Usage license attribute</h3>

<p>If <code class="prettyprint">usage_type</code> is set to <code class="prettyprint">licensed</code>, a valid image license code must be provided. Acceptable values are below. We could add an API endpoint to retrieve all these values, such as <code class="prettyprint">/media-licenses</code>.</p>

<table><thead>
<tr>
<th>usage_license_code</th>
<th>License name</th>
<th>License URL</th>
</tr>
</thead><tbody>
<tr>
<td>cc_by_2_0</td>
<td>Creative Commons Attribution 2.0</td>
<td>https://creativecommons.org/licenses/by/2.0</td>
</tr>
<tr>
<td>cc_by_2_5</td>
<td>Creative Commons Attribution 2.5</td>
<td>https://creativecommons.org/licenses/by/2.5/</td>
</tr>
<tr>
<td>cc_by_sa_2_0</td>
<td>Creative Commons Attribution-ShareAlike 2.0</td>
<td>https://creativecommons.org/licenses/by-sa/2.0</td>
</tr>
<tr>
<td>cc_by_nd_2_0</td>
<td>Creative Commons Attribution-NoDerivs 2.0</td>
<td>http://creativecommons.org/licenses/by-nd/2.0/</td>
</tr>
<tr>
<td>cc_by_3_0</td>
<td>Creative Commons Attribution 3.0</td>
<td>https://creativecommons.org/licenses/by/3.0/</td>
</tr>
<tr>
<td>cc_by_sa_3_0</td>
<td>Creative Commons Attribution-ShareAlike 3.0</td>
<td>https://creativecommons.org/licenses/by-sa/3.0</td>
</tr>
<tr>
<td>cc_by_nd_3_0</td>
<td>Creative Commons Attribution-NoDerivs 3.0</td>
<td>http://creativecommons.org/licenses/by-nd/3.0</td>
</tr>
<tr>
<td>cc_by_4_0</td>
<td>Creative Commons Attribution 4.0</td>
<td>https://creativecommons.org/licenses/by/4.0</td>
</tr>
<tr>
<td>cc_by_sa_4_0</td>
<td>Creative Commons Attribution-ShareAlike 4.0</td>
<td>https://creativecommons.org/licenses/by-sa/4.0</td>
</tr>
<tr>
<td>cc_by_nd_4_0</td>
<td>Creative Commons Attribution-NoDerivs 4.0</td>
<td>http://creativecommons.org/licenses/by-nd/4.0</td>
</tr>
</tbody></table>

<h3 id="success-http-response-code">Success HTTP response code</h3>

<p><code class="prettyprint">201 Created</code></p>

          <h2 id="update-an-image-record"><a name="images_update"></a>Update an image record</h2>

<blockquote>
<p>Request body</p>
</blockquote>
<pre class="highlight plaintext"><code>{
  "data": {
    "type": "images",
    "id": "portrait-of-takashi-tezuka-2017-likeness-jonny-snapper",
    "attributes": {
      "kind": "screen",
      "title": "New Title",
      "description": "New description.",
      "year": "",
      "date": "2000-01-01",
      "usage_type": "licensed",
      "usage_license_code": "cc_by_3_0",
      "attributed_name": "New Attributed Name",
      "attributed_url": "http://www.new-site.com",
      "source_url": "http://www.new-site/new-file.jpg"
    },
    "relationships": {
      "country": {
        "data": {
          "id": "3",
          "type": "places"
        }
      }
    }
  }
}
</code></pre>
<blockquote>
<p>HTTP 200 response body</p>
</blockquote>
<pre class="highlight plaintext"><code>{
  "data": {
    "id": "3",
    "type": "images",
    "attributes": {
      "slug": "new-title-screen",
      "file": "https://dbljumpheroku.s3.amazonaws.com/uploads/images/3/file.gif",
      "kind": "screen",
      "title": "New Title",
      "description": "New description.",
      "year": 2000,
      "date": "2000-01-01",
      "usage_type": "licensed",
      "usage_license_code": "cc_by_3_0",
      "usage_license_name": "Creative Commons Attribution 3.0",
      "usage_license_url": "https://creativecommons.org/licenses/by/3.0/",
      "attributed_name": "New Attributed Name",
      "attributed_url": "http://www.new-site.com",
      "source_url": "http://www.new-site/new-file.jpg"
    },
    "relationships": {
      "uploaded_by": {
        "data": {
          "id": "2",
          "type": "users"
        },
        "links": {
          "related": "http://api.dbljump.com/users/2"
        }
      },
      "place": {
        "data": {
          "id": "3",
          "type": "places"
        },
        "links": {
          "related": "http://api.dbljump.com/places/algeria"
        }
      }
    },
    "links": {
      "self": "http://api.dbljump.com/images/new-title-screen"
    }
  },
  "included": [
    {
      "id": "2",
      "type": "users",
      "attributes": {
        "username": "neil",
        "role": "admin",
        "given_names": "Neil",
        "family_name": "Wheatley",
        "avatar": "https://dbljumpheroku.s3.amazonaws.com/uploads/user_avatar/2/1703301240.jpg"
      },
      "links": {
        "self": "http://api.dbljump.com/users/2"
      }
    },
    {
      "id": "3",
      "type": "places",
      "attributes": {
        "subtype": "countries",
        "slug": "algeria",
        "name": "Algeria",
        "short_name": null,
        "formatted": "Algeria"
      },
      "links": {
        "self": "http://api.dbljump.com/places/countries/algeria"
      }
    }
  ],
  "meta": {
    "keywords": "new title, 2000, 2000-01-01, new attributed name, screen, image, picture, media, dbljump, video games, pc games, gaming",
    "description": "'New Title' is a video game image at Dbljump.",
    "created_at": "2017-03-30T13:16:18.639Z",
    "updated_at": "2017-03-30T13:25:42.131Z"
  }
}
</code></pre>
<p>Update an existing image record. The user must be an editor.</p>

<p>The <code class="prettyprint">file</code> attribute cannot be updated. A new image file can only be uploaded with a new image record.</p>

<ul>
<li>User authentication: required</li>
<li>Authorization level: editor</li>
</ul>

<h3 id="http-request">HTTP request</h3>

<p><code class="prettyprint">PATCH /images/{slug}</code> (replace <code class="prettyprint">{slug}</code> with image record slug)</p>

<h3 id="request-attributes">Request attributes</h3>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Req&rsquo;d?</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>kind</td>
<td>string</td>
<td>Y</td>
<td>See <a href="#image_kind">Kind</a>.</td>
</tr>
<tr>
<td>title</td>
<td>string</td>
<td>Y</td>
<td>Max 100 chars.</td>
</tr>
<tr>
<td>description</td>
<td>string</td>
<td></td>
<td>Max 250 chars.</td>
</tr>
<tr>
<td>year</td>
<td>integer</td>
<td></td>
<td>1800 to present year.</td>
</tr>
<tr>
<td>date</td>
<td>date</td>
<td></td>
<td>1800-01-01 to present year.</td>
</tr>
<tr>
<td>usage_type</td>
<td>string</td>
<td>Y</td>
<td>Must be &lsquo;free&rsquo;, &#39;fair&rsquo;, or &#39;licensed&rsquo;. See <a href="#image_usage_type">Usage type</a>.</td>
</tr>
<tr>
<td>usage_license_code</td>
<td>string</td>
<td>*</td>
<td>Req&rsquo;d if usage_type is &#39;licensed&rsquo;. See <a href="#image_usage_license">Usage license</a>.</td>
</tr>
<tr>
<td>attributed_name</td>
<td>string</td>
<td>*</td>
<td>Image owner&rsquo;s name. Max 100 chars. Req&rsquo;d if usage_type is &#39;licensed&rsquo;.</td>
</tr>
<tr>
<td>attributed_url</td>
<td>string</td>
<td></td>
<td>The owner&rsquo;s website. Max 250 chars.</td>
</tr>
<tr>
<td>source_url</td>
<td>string</td>
<td>*</td>
<td>Req&rsquo;d if usage_type is &#39;licensed&rsquo;. Max 250 chars. URL of image source.</td>
</tr>
</tbody></table>

<h3 id="relationships">Relationships</h3>

<p>Check this section&rsquo;s code example to see how to update these relationships.</p>

<table><thead>
<tr>
<th>Name</th>
<th>Relationship</th>
<th>Req&rsquo;d?</th>
<th>JSON:API type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>place</td>
<td>belongs_to</td>
<td></td>
<td>places</td>
<td>A <a href="#places_intro">place record</a> the image is associated with.</td>
</tr>
</tbody></table>

<h3 id="success-http-response-code">Success HTTP response code</h3>

<p><code class="prettyprint">200 OK</code></p>

          <h2 id="delete-an-image-record">Delete an image record</h2>

<p>Delete an existing image record. An editor can delete images they uploaded. An admin can delete any image.</p>

<ul>
<li>User authentication: required</li>
<li>Authorization level: Editor to delete own images. Admin to delete any image.</li>
</ul>

<h3 id="http-request">HTTP request</h3>

<p><code class="prettyprint">DELETE /images/{slug}</code> (replace <code class="prettyprint">{slug}</code> with image record slug)</p>

<h3 id="success-http-response-code">Success HTTP response code</h3>

<p><code class="prettyprint">204 No Content</code></p>

          <h2 id="errors">Errors</h2>

<p>Errors specific to creating and updating image records.</p>

<table><thead>
<tr>
<th>HTTP code</th>
<th>Error code</th>
<th>Pointer</th>
<th>Title</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>IMAGE_BASE64_FILE_BLANK</td>
<td>base64_file</td>
<td>File is required.</td>
</tr>
<tr>
<td>400</td>
<td>IMAGE_BASE64_FILE_INVALID</td>
<td>base64_file</td>
<td>Base64 file must be in the correct format.</td>
</tr>
<tr>
<td>400</td>
<td>IMAGE_BASE64_FILE_PRESENT</td>
<td>base64_file</td>
<td>Base64 file is not accepted for this action.</td>
</tr>
<tr>
<td>400</td>
<td>IMAGE_TITLE_BLANK</td>
<td>title</td>
<td>Title is required.</td>
</tr>
<tr>
<td>400</td>
<td>IMAGE_TITLE_TOO_LONG</td>
<td>title</td>
<td>Title cannot be more than 100 characters.</td>
</tr>
<tr>
<td>400</td>
<td>IMAGE_DESCRIPTION_TOO_LONG</td>
<td>description</td>
<td>Description cannot be more than 250 characters.</td>
</tr>
<tr>
<td>400</td>
<td>IMAGE_KIND_BLANK</td>
<td>kind</td>
<td>Kind is required.</td>
</tr>
<tr>
<td>400</td>
<td>IMAGE_KIND_INCLUSION</td>
<td>kind</td>
<td>Kind must be a valid value.</td>
</tr>
<tr>
<td>400</td>
<td>IMAGE_YEAR_INCLUSION</td>
<td>year</td>
<td>Year must be between 1800 and the present year.</td>
</tr>
<tr>
<td>400</td>
<td>IMAGE_DATE_INCLUSION</td>
<td>year</td>
<td>Date must be between 1 January 1800 and the present date.</td>
</tr>
<tr>
<td>400</td>
<td>IMAGE_USAGE_TYPE_BLANK</td>
<td>usage_type</td>
<td>Usage type is required.</td>
</tr>
<tr>
<td>400</td>
<td>IMAGE_USAGE_TYPE_INCLUSION</td>
<td>usage_type</td>
<td>Usage type must be &lsquo;free&rsquo;, &#39;fair&rsquo;, or &#39;licensed&rsquo;.</td>
</tr>
<tr>
<td>400</td>
<td>IMAGE_ATTRIBUTED_NAME_BLANK</td>
<td>attributed_name</td>
<td>Attributed name is required if usage type is &#39;licensed&rsquo;.</td>
</tr>
<tr>
<td>400</td>
<td>IMAGE_ATTRIBUTED_NAME_TOO_LONG</td>
<td>attributed_name</td>
<td>Attributed name cannot be more than 100 characters.</td>
</tr>
<tr>
<td>400</td>
<td>IMAGE_ATTRIBUTED_URL_TOO_LONG</td>
<td>attributed_url</td>
<td>Attributed URL cannot be more than 250 characters.</td>
</tr>
<tr>
<td>400</td>
<td>IMAGE_SOURCE_URL_BLANK</td>
<td>source_url</td>
<td>Source url is required if usage type is &#39;licensed&rsquo;.</td>
</tr>
<tr>
<td>400</td>
<td>IMAGE_SOURCE_URL_TOO_LONG</td>
<td>source_url</td>
<td>Source url cannot be more than 250 characters.</td>
</tr>
<tr>
<td>400</td>
<td>IMAGE_USAGE_LICENSE_CODE_BLANK</td>
<td>usage_license_code</td>
<td>Usage license code is required if usage type is &#39;licensed&rsquo;.</td>
</tr>
<tr>
<td>400</td>
<td>IMAGE_USAGE_LICENSE_CODE_INCLUSION</td>
<td>usage_license_code</td>
<td>Usage license code must be valid.</td>
</tr>
<tr>
<td>400</td>
<td>IMAGE_PLACE_ID_INVALID</td>
<td>relationships/place/data/id</td>
<td>Must be a valid place ID.</td>
</tr>
</tbody></table>

          <h1 id="platforms"><a name="platforms_intro"></a>Platforms</h1>

<p>Resources related to game platforms.</p>

<p>Game platforms can include dedicated game systems (e.g. Sony PlayStation 4), computers (e.g. Atari ST), operating systems (e.g. Microsoft Windows), add-ons with unique game libraries (e.g. Sega 32X), and arcade systems (e.g. Capcom CPS-2).</p>

<h3 id="request-attributes">Request attributes</h3>

<p>See <a href="#platforms_create">Create a new platform record</a> and <a href="#platforms_update">Update a platform record</a>.</p>

<h3 id="response-attributes">Response attributes</h3>

<p>See <a href="#platforms_show">Get single country</a>.</p>

          <h2 id="get-all-platforms">Get all platforms</h2>

<blockquote>
<p>HTTP 200 response body</p>
</blockquote>
<pre class="highlight plaintext"><code>{
  "data": [
    {
      "id": "1",
      "type": "platforms",
      "attributes": {
        "slug": "sony-playstation",
        "name": "PlayStation",
        "short_name": "PS",
        "sphere": "home",
        "kind": "system"
      },
      "relationships": {
        "holder": {
          "meta": {}
        },
        "parent": {
          "data": null,
          "links": {
            "related": "http://api.dbljump.com/platforms/sega-genesis"
          }
        },
        "created_by": {
          "data": {
            "id": "1",
            "type": "users"
          },
          "links": {
            "related": "http://api.dbljump.com/users/1"
          }
        }
      },
      "links": {
        "self": "http://api.dbljump.com/platforms/sony-playstation"
      }
    },
    {
      "id": "2",
      "type": "platforms",
      "attributes": {
        "slug": "sony-playstation-2",
        "name": "PlayStation 2",
        "short_name": "PS2",
        "sphere": "home",
        "kind": "system"
      },
      "relationships": {
        "holder": {
          "meta": {}
        },
        "parent": {
          "data": null,
          "links": {
            "related": "http://api.dbljump.com/platforms/sega-genesis"
          }
        },
        "created_by": {
          "data": {
            "id": "1",
            "type": "users"
          },
          "links": {
            "related": "http://api.dbljump.com/users/1"
          }
        }
      },
      "links": {
        "self": "http://api.dbljump.com/platforms/sony-playstation-2"
      }
    },
    {
      "id": "3",
      "type": "platforms",
      "attributes": {
        "slug": "sony-playstation-3",
        "name": "PlayStation 3",
        "short_name": "PS3",
        "sphere": "home",
        "kind": "system"
      },
      "relationships": {
        "holder": {
          "meta": {}
        },
        "parent": {
          "data": null,
          "links": {
            "related": "http://api.dbljump.com/platforms/sega-genesis"
          }
        },
        "created_by": {
          "data": {
            "id": "1",
            "type": "users"
          },
          "links": {
            "related": "http://api.dbljump.com/users/1"
          }
        }
      },
      "links": {
        "self": "http://api.dbljump.com/platforms/sony-playstation-3"
      }
    }
  ],
  "links": {
    "self": "http://api.dbljump.com/platforms?page%5Bnumber%5D=1&amp;page%5Bsize%5D=3",
    "next": "http://api.dbljump.com/platforms?page%5Bnumber%5D=2&amp;page%5Bsize%5D=3",
    "last": "http://api.dbljump.com/platforms?page%5Bnumber%5D=13&amp;page%5Bsize%5D=3"
  },
  "meta": {
    "total_items": 38
  }
}
</code></pre>
<p>Retrieve all platforms. Automatically paginated.</p>

<ul>
<li>User authentication: not required</li>
<li>Authorization level: n/a</li>
</ul>

<h3 id="http-request">HTTP request</h3>

<p><code class="prettyprint">GET /platforms</code></p>

<h3 id="url-query-parameters">URL query parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>fields[{record-type}]</td>
<td>All fields</td>
<td>Return only specified fields, e.g. <code class="prettyprint">?fields[platforms]=name,short_name</code></td>
</tr>
<tr>
<td>filter[{field}]</td>
<td>All records</td>
<td>Filter search by field, e.g. <code class="prettyprint">?filter[name]=Tokyo Prefecture</code></td>
</tr>
<tr>
<td>page[number]</td>
<td>1</td>
<td>Select the page number, e.g. <code class="prettyprint">?page[number]=3</code></td>
</tr>
<tr>
<td>page[size]</td>
<td>30</td>
<td>Select the number of records per page, e.g. <code class="prettyprint">?page[size]=20</code></td>
</tr>
</tbody></table>

<h3 id="success-http-response-code">Success HTTP response code</h3>

<p><code class="prettyprint">200 OK</code></p>

          <h2 id="get-single-platform"><a name="platforms_show"></a>Get single platform</h2>

<blockquote>
<p>HTTP 200 response body</p>
</blockquote>
<pre class="highlight plaintext"><code>{
  "data": {
    "id": "31",
    "type": "platforms",
    "attributes": {
      "slug": "sega-32x",
      "name": "32X",
      "short_name": "32X",
      "sphere": "home",
      "kind": "add-on"
    },
    "relationships": {
      "holder": {
        "meta": {}
      },
      "parent": {
        "data": {
          "id": "29",
          "type": "platforms"
        },
        "links": {
          "related": "http://api.dbljump.com/platforms/sega-genesis"
        }
      },
      "created_by": {
        "data": {
          "id": "1",
          "type": "users"
        },
        "links": {
          "related": "http://api.dbljump.com/users/1"
        }
      }
    },
    "links": {
      "self": "http://api.dbljump.com/platforms/sega-32x"
    }
  },
  "included": [
    {
      "id": "1",
      "type": "users",
      "attributes": {
        "username": "tikithekiwi",
        "role": "admin",
        "given_names": "Tiki",
        "family_name": "the Kiwi",
        "avatar": null
      },
      "links": {
        "self": "http://api.dbljump.com/users/1"
      }
    }
  ],
  "meta": {
    "keywords": "32x, 32x, sega, home, add-on, platform, dbljump, video games, pc games, gaming",
    "description": "Find out about games for 32X by Sega Games Co., Ltd. at Dbljump, the video game reference.",
    "created_at": "2017-03-30T12:40:16.950Z",
    "updated_at": "2017-03-30T12:40:16.950Z"
  }
}
</code></pre>
<p>Retrieve a single platform record. Platforms are publicly available. No sign-in is required.</p>

<ul>
<li>User authentication: not required</li>
<li>Authorization level: n/a</li>
</ul>

<h3 id="http-request">HTTP request</h3>

<p><code class="prettyprint">GET /platforms/{slug}</code> (replace <code class="prettyprint">{slug}</code> with platform record slug)</p>

<h3 id="success-http-response-code">Success HTTP response code</h3>

<p><code class="prettyprint">200 OK</code></p>

<h3 id="response-attributes"><a name="platform_response_attrs"></a>Response attributes</h3>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Req&rsquo;d?</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>slug</td>
<td>string</td>
<td>Y</td>
<td>A record ID based on metadata, e.g. &lsquo;sega-genesis&rsquo;.</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>Y</td>
<td>The full North American name, or nearest alternative, e.g. &#39;Genesis&rsquo;</td>
</tr>
<tr>
<td>short_name</td>
<td>string</td>
<td></td>
<td>The common abbreviated name, e.g. &#39;SNES&rsquo;.</td>
</tr>
<tr>
<td>sphere</td>
<td>string</td>
<td>Y</td>
<td>The usual platform environment. See <a href="#platforms_sphere">Sphere</a>.</td>
</tr>
<tr>
<td>kind</td>
<td>string</td>
<td>Y</td>
<td>Platform type. See <a href="#platforms_kind">Kind</a>.</td>
</tr>
</tbody></table>

<h3 id="relationships">Relationships</h3>

<table><thead>
<tr>
<th>Association</th>
<th>Record type</th>
<th>Relationship type</th>
</tr>
</thead><tbody>
<tr>
<td>holder</td>
<td>companies</td>
<td>belongs_to</td>
</tr>
<tr>
<td>parent</td>
<td>platforms</td>
<td>belongs_to</td>
</tr>
<tr>
<td>created_by</td>
<td>users</td>
<td>belongs_to</td>
</tr>
</tbody></table>

<h3 id="included">Included</h3>

<table><thead>
<tr>
<th>Record type</th>
<th>Relationship</th>
<th>Attributes included</th>
</tr>
</thead><tbody>
<tr>
<td>users</td>
<td>created_by</td>
<td>username, role, given_names, family_name, avatar</td>
</tr>
</tbody></table>

<h3 id="meta">Meta</h3>

<p>The <code class="prettyprint">meta</code> section of the JSON response includes <code class="prettyprint">keywords</code>, <code class="prettyprint">description</code>, <code class="prettyprint">created_at</code> and <code class="prettyprint">updated_at</code> attributes.</p>

          <h2 id="create-a-new-platform-record"><a name="platforms_create"></a>Create a new platform record</h2>

<blockquote>
<p>Request body</p>
</blockquote>
<pre class="highlight plaintext"><code>{
  "data": {
    "type": "platforms",
    "attributes": {
      "name": "New Platform",
      "short_name": "NPlat",
      "sphere": "home",
      "kind": "add-on",
    }
    "relationships": {
      "holder": {
        "data": {
          "id": null,
          "type": "companies"
        }
      },
      "parent": {
        "data": {
          "id": "13",
          "type": "platforms"
        }
      }
    }
  }
}
</code></pre>
<blockquote>
<p>HTTP 201 response body</p>
</blockquote>
<pre class="highlight plaintext"><code>{
  "data": {
    "id": "39",
    "type": "platforms",
    "attributes": {
      "slug": "nintendo-new-platform",
      "name": "New Platform",
      "short_name": "NPlat",
      "sphere": "home",
      "kind": "add-on"
    },
    "relationships": {
      "holder": {
        "meta": {}
      },
      "parent": {
        "data": {
          "id": "13",
          "type": "platforms"
        },
        "links": {
          "related": "http://api.dbljump.com/platforms/nintendo-switch"
        }
      },
      "created_by": {
        "data": {
          "id": "2",
          "type": "users"
        },
        "links": {
          "related": "http://api.dbljump.com/users/2"
        }
      }
    },
    "links": {
      "self": "http://api.dbljump.com/platforms/nintendo-new-platform"
    }
  },
  "included": [
    {
      "id": "2",
      "type": "users",
      "attributes": {
        "username": "neil",
        "role": "admin",
        "given_names": "Neil",
        "family_name": "Wheatley",
        "avatar": "https://dbljumpheroku.s3.amazonaws.com/uploads/user_avatar/2/1703301240.jpg"
      },
      "links": {
        "self": "http://api.dbljump.com/users/2"
      }
    }
  ],
  "meta": {
    "keywords": "new platform, nplat, nintendo, home, add-on, platform, dbljump, video games, pc games, gaming",
    "description": "Find out about games for New Platform by Nintendo Co., Ltd. at Dbljump, the video game reference.",
    "created_at": "2017-03-30T13:32:37.200Z",
    "updated_at": "2017-03-30T13:32:37.200Z"
  }
}
</code></pre>
<p>Create a new platform record. Admin-level authorization required.</p>

<ul>
<li>User authentication: required</li>
<li>Authorization level: admin</li>
</ul>

<h3 id="http-request">HTTP request</h3>

<p><code class="prettyprint">POST /platforms</code></p>

<h3 id="request-attributes">Request attributes</h3>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Req&rsquo;d?</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>string</td>
<td>Y</td>
<td>Max 50 chars. The full North American name, or nearest alternative, e.g. &lsquo;Genesis&rsquo;</td>
</tr>
<tr>
<td>short_name</td>
<td>string</td>
<td></td>
<td>Max 10 chars. The common abbreviated name, e.g. &#39;SNES&rsquo;.</td>
</tr>
<tr>
<td>sphere</td>
<td>string</td>
<td>Y</td>
<td>The usual platform environment. See <a href="#platforms_sphere">Sphere</a>.</td>
</tr>
<tr>
<td>kind</td>
<td>string</td>
<td>Y</td>
<td>Platform type. See <a href="#platforms_kind">Kind</a>.</td>
</tr>
</tbody></table>

<h3 id="relationships">Relationships</h3>

<p>Check this section&rsquo;s code example to see how to update these relationships.</p>

<table><thead>
<tr>
<th>Name</th>
<th>Relationship</th>
<th>Req&rsquo;d?</th>
<th>JSON:API type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>holder</td>
<td>belongs_to</td>
<td>Y</td>
<td>companies</td>
<td>Must be a valid company. The platform holder, e.g. &#39;Sony&rsquo; for PlayStation.</td>
</tr>
<tr>
<td>parent</td>
<td>belongs_to</td>
<td></td>
<td>platforms</td>
<td>Must be a valid platform. Used for add-ons, e.g. &#39;Sega CD&rsquo; belongs to Sega Genesis.</td>
</tr>
</tbody></table>

<h3 id="sphere"><a name="platforms_sphere"></a>Sphere</h3>

<p>The <code class="prettyprint">sphere</code> attribute must take one of the following values.</p>

<table><thead>
<tr>
<th>Value</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>home</td>
<td>Usually used at home, e.g. a home console or computer.</td>
</tr>
<tr>
<td>portable</td>
<td>Portable or handheld, e.g. PS Vita or Nintendo Game Boy.</td>
</tr>
<tr>
<td>mobile</td>
<td>A phone, tablet or mobile operating system, e.g. Android.</td>
</tr>
<tr>
<td>arcade</td>
<td>Associated with public game arcades, e.g. Sega NAOMI.</td>
</tr>
<tr>
<td>non-gaming</td>
<td>For platforms not usually associated with gaming.</td>
</tr>
</tbody></table>

<h3 id="kind"><a name="platforms_kind"></a>Kind</h3>

<p>The <code class="prettyprint">kind</code> attribute must take one of the following values.</p>

<table><thead>
<tr>
<th>Value</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>system</td>
<td>Hardware such as a console, computer or device.</td>
</tr>
<tr>
<td>OS</td>
<td>A software operating system that might run on various devices.</td>
</tr>
<tr>
<td>add-on</td>
<td>A device that requires its parent platform to run.</td>
</tr>
</tbody></table>

<h3 id="success-http-response-code">Success HTTP response code</h3>

<p><code class="prettyprint">201 Created</code></p>

          <h2 id="update-a-platform-record"><a name="platforms_update"></a>Update a platform record</h2>

<blockquote>
<p>Request body</p>
</blockquote>
<pre class="highlight plaintext"><code>{
  "data": {
    "type": "platforms",
    "id": "sega-dreamcast-2",
    "attributes": {
      "name": "Updated Name",
      "short_name": "Changed",
      "sphere": "portable",
      "kind": "system"
    },
    "relationships": {
      "holder": {
        "data": {
          "id": null,
          "type": "companies"
        }
      },
      "parent": {
        "data": {
          "id": "2",
          "type": "platforms"
        }
      }
    }
  }
}
</code></pre>
<blockquote>
<p>HTTP 200 response body</p>
</blockquote>
<pre class="highlight plaintext"><code>{
  "data": {
    "id": "27",
    "type": "platforms",
    "attributes": {
      "slug": "nintendo-updated-name",
      "name": "Updated Name",
      "short_name": "Changed",
      "sphere": "portable",
      "kind": "system"
    },
    "relationships": {
      "holder": {
        "meta": {}
      },
      "parent": {
        "data": {
          "id": "2",
          "type": "platforms"
        },
        "links": {
          "related": "http://api.dbljump.com/platforms/sony-playstation-2"
        }
      },
      "created_by": {
        "data": {
          "id": "1",
          "type": "users"
        },
        "links": {
          "related": "http://api.dbljump.com/users/1"
        }
      }
    },
    "links": {
      "self": "http://api.dbljump.com/platforms/nintendo-updated-name"
    }
  },
  "included": [
    {
      "id": "1",
      "type": "users",
      "attributes": {
        "username": "tikithekiwi",
        "role": "admin",
        "given_names": "Tiki",
        "family_name": "the Kiwi",
        "avatar": null
      },
      "links": {
        "self": "http://api.dbljump.com/users/1"
      }
    }
  ],
  "meta": {
    "keywords": "updated name, changed, nintendo, portable, system, platform, dbljump, video games, pc games, gaming",
    "description": "Find out about games for Updated Name by Nintendo Co., Ltd. at Dbljump, the video game reference.",
    "created_at": "2017-03-30T12:40:16.756Z",
    "updated_at": "2017-03-30T13:34:53.017Z"
  }
}
</code></pre>
<p>Update an existing platform record. The user must be an admin.</p>

<ul>
<li>User authentication: required</li>
<li>Authorization level: admin</li>
</ul>

<h3 id="http-request">HTTP request</h3>

<p><code class="prettyprint">PATCH /platforms/{slug}</code> (replace <code class="prettyprint">{slug}</code> with platform record slug)</p>

<h3 id="request-attributes">Request attributes</h3>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Req&rsquo;d?</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>string</td>
<td>Y</td>
<td>Max 50 chars. The full North American name, or nearest alternative, e.g. &lsquo;Genesis&rsquo;</td>
</tr>
<tr>
<td>short_name</td>
<td>string</td>
<td></td>
<td>Max 10 chars. The common abbreviated name, e.g. &#39;SNES&rsquo;.</td>
</tr>
<tr>
<td>sphere</td>
<td>string</td>
<td>Y</td>
<td>The usual platform environment. See <a href="#platforms_sphere">Sphere</a>.</td>
</tr>
<tr>
<td>kind</td>
<td>string</td>
<td>Y</td>
<td>Platform type. See <a href="#platforms_kind">Kind</a>.</td>
</tr>
</tbody></table>

<h3 id="relationships">Relationships</h3>

<p>Check this section&rsquo;s code example to see how to update these relationships.</p>

<table><thead>
<tr>
<th>Name</th>
<th>Relationship</th>
<th>Req&rsquo;d?</th>
<th>JSON:API type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>holder</td>
<td>belongs_to</td>
<td>Y</td>
<td>companies</td>
<td>Must be a valid company. The platform holder, e.g. &#39;Sony&rsquo; for PlayStation.</td>
</tr>
<tr>
<td>parent</td>
<td>belongs_to</td>
<td></td>
<td>platforms</td>
<td>Must be a valid platform. Used for add-ons, e.g. &#39;Sega CD&rsquo; belongs to Sega Genesis.</td>
</tr>
</tbody></table>

<h3 id="success-http-response-code">Success HTTP response code</h3>

<p><code class="prettyprint">200 OK</code></p>

          <h2 id="delete-a-platform-record">Delete a platform record</h2>

<p>Delete an existing platform record. Admin-level authorization required.</p>

<ul>
<li>User authentication: required</li>
<li>Authorization level: admin</li>
</ul>

<h3 id="http-request">HTTP request</h3>

<p><code class="prettyprint">DELETE /platforms/{slug}</code> (replace <code class="prettyprint">{slug}</code> with platform record slug)</p>

<h3 id="success-http-response-code">Success HTTP response code</h3>

<p><code class="prettyprint">204 No Content</code></p>

          <h2 id="errors">Errors</h2>

<p>Errors specific to creating and updating platform records.</p>

<table><thead>
<tr>
<th>HTTP code</th>
<th>Error code</th>
<th>Pointer</th>
<th>Title</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>PLATFORM_NAME_BLANK</td>
<td>name</td>
<td>Name is required.</td>
</tr>
<tr>
<td>400</td>
<td>PLATFORM_NAME_TAKEN</td>
<td>name</td>
<td>Name has already been taken.</td>
</tr>
<tr>
<td>400</td>
<td>PLATFORM_NAME_TOO_LONG</td>
<td>name</td>
<td>Name cannot be more than 50 characters.</td>
</tr>
<tr>
<td>400</td>
<td>PLATFORM_SHORT_NAME_TAKEN</td>
<td>short_name</td>
<td>Short name has already been taken.</td>
</tr>
<tr>
<td>400</td>
<td>PLATFORM_SHORT_TOO_LONG</td>
<td>short_name</td>
<td>Short name cannot be more than 10 characters.</td>
</tr>
<tr>
<td>400</td>
<td>PLATFORM_SPHERE_BLANK</td>
<td>sphere</td>
<td>Sphere is required.</td>
</tr>
<tr>
<td>400</td>
<td>PLATFORM_SPHERE_INCLUSION</td>
<td>sphere</td>
<td>Sphere must be an accepted value.</td>
</tr>
<tr>
<td>400</td>
<td>PLATFORM_KIND_BLANK</td>
<td>kind</td>
<td>Kind is required.</td>
</tr>
<tr>
<td>400</td>
<td>PLATFORM_KIND_INCLUSION</td>
<td>kind</td>
<td>Kind must be an accepted value.</td>
</tr>
<tr>
<td>400</td>
<td>PLATFORM_HOLDER_ID_BLANK</td>
<td>relationships/holder/data/id</td>
<td>Holder is required.</td>
</tr>
<tr>
<td>400</td>
<td>PLATFORM_HOLDER_ID_INVALID</td>
<td>relationships/holder/data/id</td>
<td>Holder ID must be a valid company ID.</td>
</tr>
<tr>
<td>400</td>
<td>PLATFORM_PARENT_ID_INVALID</td>
<td>relationships/parent/data/id</td>
<td>Parent ID must be a valid platform ID.</td>
</tr>
</tbody></table>

          <h1 id="places"><a name="places_intro"></a>Places</h1>

<p>Resources related to places.</p>

<h3 id="kinds-of-place">Kinds of place</h3>

<p>There are four kinds of place, determined by the value of the <code class="prettyprint">kind</code> attribute.</p>

<table><thead>
<tr>
<th>Kind</th>
<th>Description</th>
<th>Relationships</th>
</tr>
</thead><tbody>
<tr>
<td>Region</td>
<td>A group of countries</td>
<td>Has many country <code class="prettyprint">children</code>.</td>
</tr>
<tr>
<td>Country</td>
<td>A country, e.g. Japan</td>
<td>Belongs to many <code class="prettyprint">regions</code>. Has many subdivision <code class="prettyprint">children</code>.</td>
</tr>
<tr>
<td>Subdivision</td>
<td>An administrative area of a country, e.g. a county or state</td>
<td>Belongs to a <code class="prettyprint">parent</code> country. Has many locality <code class="prettyprint">children</code>.</td>
</tr>
<tr>
<td>Locality</td>
<td>A city or town</td>
<td>Belongs to a <code class="prettyprint">parent</code> subdivision.</td>
</tr>
</tbody></table>

<h3 id="request-attributes">Request attributes</h3>

<p>See <a href="#places_create">Create a new place record</a> and <a href="#places_update">Update a place record</a>.</p>

<h3 id="response-attributes">Response attributes</h3>

<p>See <a href="#places_show">Get single place</a>.</p>

          <h2 id="get-all-places"><a name="places_index"></a>Get all places</h2>

<blockquote>
<p>Response body | <code class="prettyprint">HTTP 200</code></p>
</blockquote>
<pre class="highlight plaintext"><code># GET /places?page[size]=2&amp;filter[kind]=subdivision

{
  "data": [
    {
      "id": "2237",
      "type": "places",
      "attributes": {
        "kind": "subdivision",
        "slug": "sabha-libya",
        "name": "Sabha",
        "formatted": "Sabha, Libya",
        "short_name": null,
        "also_known_as": [],
        "latitude": null,
        "longitude": null,
        "iso_code": null
      },
      "relationships": {
        "parent": {
          "data": {
            "id": "117",
            "type": "places"
          },
          "links": {
            "related": "http://api.dbljump.com/places/libya"
          }
        },
        "children": {
          "data": [],
          "links": {
            "related": "http://api.dbljump.com/places/sabha-libya/children"
          }
        },
        "regions": {
          "data": [
            {
              "id": "236",
              "type": "places"
            }
          ],
          "links": {
            "related": "http://api.dbljump.com/places/sabha-libya/regions"
          }
        },
        "created_by": {
          "data": {
            "id": "1",
            "type": "users"
          },
          "links": {
            "related": "http://api.dbljump.com/users/1"
          }
        }
      },
      "links": {
        "self": "http://api.dbljump.com/places/sabha-libya"
      }
    },
    {
      "id": "240",
      "type": "places",
      "attributes": {
        "kind": "subdivision",
        "slug": "0-niue",
        "name": "All",
        "formatted": "All, Niue",
        "short_name": null,
        "also_known_as": [],
        "latitude": null,
        "longitude": null,
        "iso_code": null
      },
      "relationships": {
        "parent": {
          "data": {
            "id": "151",
            "type": "places"
          },
          "links": {
            "related": "http://api.dbljump.com/places/niue"
          }
        },
        "children": {
          "data": [],
          "links": {
            "related": "http://api.dbljump.com/places/0-niue/children"
          }
        },
        "regions": {
          "data": [],
          "links": {
            "related": "http://api.dbljump.com/places/0-niue/regions"
          }
        },
        "created_by": {
          "data": {
            "id": "1",
            "type": "users"
          },
          "links": {
            "related": "http://api.dbljump.com/users/1"
          }
        }
      },
      "links": {
        "self": "http://api.dbljump.com/places/0-niue"
      }
    }
  ],
  "links": {
    "self": "http://api.dbljump.com/places?filter%5Bkind%5D=subdivision&amp;page%5Bnumber%5D=1&amp;page%5Bsize%5D=2",
    "next": "http://api.dbljump.com/places?filter%5Bkind%5D=subdivision&amp;page%5Bnumber%5D=2&amp;page%5Bsize%5D=2",
    "last": "http://api.dbljump.com/places?filter%5Bkind%5D=subdivision&amp;page%5Bnumber%5D=1321&amp;page%5Bsize%5D=2"
  },
  "meta": {
    "total_items": 2937
  }
}
</code></pre>
<p>Retrieve all places. Automatically paginated.</p>

<ul>
<li>User authentication: not required</li>
<li>Authorization level: n/a</li>
</ul>

<h3 id="http-request">HTTP request</h3>

<p><code class="prettyprint">GET /places</code></p>

<h3 id="url-query-parameters">URL query parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>fields[{record-type}]</td>
<td>All fields</td>
<td>Return only specified fields, e.g. <code class="prettyprint">?fields[places]=name,formatted</code></td>
</tr>
<tr>
<td>filter[{field}]</td>
<td>All records</td>
<td>Filter search by field, e.g. <code class="prettyprint">?filter[kind]=country,region</code></td>
</tr>
<tr>
<td>page[number]</td>
<td>1</td>
<td>Select the page number, e.g. <code class="prettyprint">?page[number]=3</code></td>
</tr>
<tr>
<td>page[size]</td>
<td>30</td>
<td>Select the number of records per page, e.g. <code class="prettyprint">?page[size]=20</code></td>
</tr>
</tbody></table>

<h3 id="success-http-response-code">Success HTTP response code</h3>

<p><code class="prettyprint">200 OK</code></p>

          <h2 id="get-single-place"><a name="places_show"></a>Get single place</h2>

<blockquote>
<p>Response body | <code class="prettyprint">HTTP 200</code></p>
</blockquote>
<pre class="highlight plaintext"><code># GET /places/united-states

{
  "data": {
    "id": "220",
    "type": "places",
    "attributes": {
      "kind": "country",
      "slug": "united-states",
      "name": "United States",
      "formatted": "United States",
      "short_name": "USA",
      "also_known_as": [],
      "latitude": 38,
      "longitude": -97,
      "iso_code": "US"
    },
    "relationships": {
      "parent": {
        "data": null,
        "links": {
          "related": "http://api.dbljump.com/places/united-states"
        }
      },
      "children": {
        "data": [
          {
            "id": "329",
            "type": "places"
          },
          {
            "id": "335",
            "type": "places"
          },
          {
            "id": "398",
            "type": "places"
          },
          {
            "id": "460",
            "type": "places"
          },
          {
            "id": "461",
            "type": "places"
          }
        ],
        "links": {
          "related": "http://api.dbljump.com/places/united-states/children"
        }
      },
      "regions": {
        "data": [
          {
            "id": "233",
            "type": "places"
          },
          {
            "id": "238",
            "type": "places"
          }
        ],
        "links": {
          "related": "http://api.dbljump.com/places/united-states/regions"
        }
      },
      "created_by": {
        "data": {
          "id": "1",
          "type": "users"
        },
        "links": {
          "related": "http://api.dbljump.com/users/1"
        }
      }
    },
    "links": {
      "self": "http://api.dbljump.com/places/united-states"
    }
  },
  "included": [
    {
      "id": "1",
      "type": "users",
      "attributes": {
        "username": "tikithekiwi",
        "role": "admin",
        "given_names": "Tiki",
        "family_name": "the Kiwi",
        "avatar": null
      },
      "links": {
        "self": "http://api.dbljump.com/users/1"
      }
    }
  ],
  "meta": {
    "keywords": "united states, usa, us, american, country, place, dbljump, video games, pc games, gaming",
    "description": "Find video game companies and games industry professionals from United States at Dbljump.",
    "created_at": "2017-04-05T13:55:45.684Z",
    "updated_at": "2017-04-05T13:55:45.684Z"
  }
}
</code></pre>
<p>Retrieve a single place record. Places are publicly available. No sign-in is required.</p>

<ul>
<li>User authentication: not required</li>
<li>Authorization level: n/a</li>
</ul>

<h3 id="http-request">HTTP request</h3>

<p><code class="prettyprint">GET /places/{slug}</code> (replace <code class="prettyprint">{slug}</code> with place record slug)</p>

<h3 id="success-http-response-code">Success HTTP response code</h3>

<p><code class="prettyprint">200 OK</code></p>

<h3 id="response-attributes"><a name="place_response_attrs"></a>Response attributes</h3>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Req&rsquo;d?</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>kind</td>
<td>string</td>
<td>Y</td>
<td>The place classification. Either &lsquo;region&rsquo;, &#39;country&rsquo;, &#39;subdivision&rsquo;, or &#39;locality&rsquo;.</td>
</tr>
<tr>
<td>slug</td>
<td>string</td>
<td>Y</td>
<td>A record ID based on the formatted name, e.g. &#39;glasgow-scotland-united-kingdom&rsquo;.</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>Y</td>
<td>The place name, e.g. &#39;Glasow&rsquo; or &#39;Scotland&rsquo; or &#39;United Kingdom&rsquo; or &#39;Europe&rsquo;.</td>
</tr>
<tr>
<td>formatted</td>
<td>string</td>
<td>Y</td>
<td>The full name including parent places, e.g. &#39;Glasgow, Scotland, United Kingdom&rsquo;.</td>
</tr>
<tr>
<td>short_name</td>
<td>string</td>
<td></td>
<td>A commonly-used short name, e.g. &#39;USA&rsquo;, &#39;UK&rsquo;, &#39;CA&rsquo;, &#39;LA&rsquo;.</td>
</tr>
<tr>
<td>also_known_as</td>
<td>array</td>
<td></td>
<td>An array of aliases, e.g. <code class="prettyprint">[&#39;Nippon&#39;, &#39;&#39;]</code> for Japan.</td>
</tr>
<tr>
<td>latitude</td>
<td>number</td>
<td></td>
<td>Geographic coordinate.</td>
</tr>
<tr>
<td>longitude</td>
<td>number</td>
<td></td>
<td>Geographic coordinate.</td>
</tr>
<tr>
<td>iso_code</td>
<td>string</td>
<td>Countries only</td>
<td>2-character ISO 3166-1 code. Countries only.</td>
</tr>
</tbody></table>

<h3 id="relationships">Relationships</h3>

<table><thead>
<tr>
<th>Name</th>
<th>Record type</th>
<th>Relationship type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>created_by</td>
<td>users</td>
<td>belongs_to</td>
<td>The user that created the record.</td>
</tr>
<tr>
<td>parent</td>
<td>places</td>
<td>belongs_to</td>
<td>The country a subdivision is in; he subdivision a locality is in; null for countries and regions.</td>
</tr>
<tr>
<td>children</td>
<td>places</td>
<td>has_many</td>
<td>The countries inside a region; the subdivisions inside a country; the localities inside a subdivision; null for localities.</td>
</tr>
<tr>
<td>regions</td>
<td>places</td>
<td>has_many</td>
<td>The regions that a country, subdivision, or locality belong to. Null for regions.</td>
</tr>
</tbody></table>

<h3 id="included">Included</h3>

<table><thead>
<tr>
<th>Record type</th>
<th>Relationship</th>
<th>Attributes included</th>
</tr>
</thead><tbody>
<tr>
<td>users</td>
<td>created_by</td>
<td>username, role, given_names, family_name, avatar</td>
</tr>
</tbody></table>

<h3 id="meta">Meta</h3>

<p>The <code class="prettyprint">meta</code> section of the JSON response includes <code class="prettyprint">keywords</code>, <code class="prettyprint">description</code>, <code class="prettyprint">created_at</code> and <code class="prettyprint">updated_at</code> attributes.</p>

          <h2 id="create-a-new-place-record"><a name="places_create"></a>Create a new place record</h2>

<blockquote>
<p>Request body | <code class="prettyprint">POST /places</code></p>
</blockquote>
<pre class="highlight plaintext"><code>{
  "data": {
    "type": "places",
    "attributes": {
      "kind": "subdivision",
      "name": "Maryland",
      "short_name": "MD",
      "also_known_as": ["Old Line State", "Chesapeake Bay State"],
      "latitude": "38.0",
      "longitude": "-77.0",
      "iso_code": ""
    },
    "relationships": {
      "parent": {
        "data": {
          "id": "220",
          "type": "places"
        }
      }
    }
  }
}
</code></pre>
<blockquote>
<p>Response body | <code class="prettyprint">HTTP 201</code></p>
</blockquote>
<pre class="highlight plaintext"><code>{
  "data": {
    "id": "2937",
    "type": "places",
    "attributes": {
      "kind": "subdivision",
      "slug": "maryland-united-states",
      "name": "Maryland",
      "short_name": "MD",
      "formatted": "Maryland, United States",
      "iso_code": "",
      "also_known_as": [
        "Old Line State",
        "Chesapeake Bay State"
      ],
      "nationality": "",
      "currency": "",
      "latitude": 38.0,
      "longitude": -77.0
    },
    "relationships": {
      "created_by": {
        "data": {
          "id": "2",
          "type": "users"
        },
        "links": {
          "related": "http://api.dbljump.com/users/2"
        }
      },
      "parent": {
        "data": {
          "id": "220",
          "type": "users"
        },
        "links": {
          "related": "http://api.dbljump.com/places/united-states"
        }
      },
      "children": {
        "links": {
          "related": "http://api.dbljump.com/places/maryland-united-states/children"
        }
      }
    },
    "links": {
      "self": "http://api.dbljump.com/places/maryland-united-states"
    }
  },
  "included": [
    {
      "id": "2",
      "type": "users",
      "attributes": {
        "username": "neil",
        "role": "admin",
        "given_names": "Neil",
        "family_name": "Wheatley",
        "avatar": "https://dbljumpheroku.s3.amazonaws.com/uploads/user_avatar/2/1703301240.jpg"
      },
      "links": {
        "self": "http://api.dbljump.com/users/2"
      }
    }
  ],
  "meta": {
    "keywords": "maryland, md, place, dbljump, video games, pc games, gaming",
    "description": "Find video game companies and games industry professionals from Maryland, United States at Dbljump.",
    "created_at": "2017-03-30T13:39:33.324Z",
    "updated_at": "2017-03-30T13:39:33.324Z"
  }
}
</code></pre>
<p>Create a new place record. Use the <code class="prettyprint">kind</code> attribute to set whether the place is a region (i.e. a group of countries), country, subdivision (i.e. a state or county), or locality (i.e. a town or city). Admin-level authorization required, or editor-level if <code class="prettyprint">kind == &#39;locality&#39;</code>.</p>

<ul>
<li>User authentication: required</li>
<li>Authorization level: admin for <code class="prettyprint">region</code>, <code class="prettyprint">country</code> or <code class="prettyprint">subdivision</code>; editor for <code class="prettyprint">locality</code> records.</li>
</ul>

<h3 id="http-request">HTTP request</h3>

<p><code class="prettyprint">POST /places</code></p>

<h3 id="request-attributes">Request attributes</h3>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Req&rsquo;d?</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>kind</td>
<td>string</td>
<td>Y</td>
<td>Must be &lsquo;region&rsquo;, &#39;country&rsquo;, &#39;subdivision&rsquo;, or &#39;locality&rsquo;.</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>Y</td>
<td>Unique. 2-50 chars. English-language common name, e.g. &#39;United States&rsquo;.</td>
</tr>
<tr>
<td>short_name</td>
<td>string</td>
<td></td>
<td>Unique. 2-20 chars. Common short name, e.g. &#39;USA&rsquo;.</td>
</tr>
<tr>
<td>also_known_as</td>
<td>array</td>
<td></td>
<td>Members must be 2-50 char strings. E.g. <code class="prettyprint">[&#39;US&#39;, &#39;America&#39;]</code>.</td>
</tr>
<tr>
<td>latitude</td>
<td>number</td>
<td></td>
<td>Between -90 and 90.</td>
</tr>
<tr>
<td>longitude</td>
<td>number</td>
<td></td>
<td>Between -180 and 180.</td>
</tr>
<tr>
<td>iso_code</td>
<td>string</td>
<td>Country-only</td>
<td>Unique. 2 chars. ISO 3166-1 country code.</td>
</tr>
</tbody></table>

<h3 id="relationships">Relationships</h3>

<table><thead>
<tr>
<th>Name</th>
<th>Relationship</th>
<th>Req&rsquo;d?</th>
<th>JSON:API type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>parent</td>
<td>belongs_to</td>
<td>Subdivisions and localities only</td>
<td>places</td>
<td>The country a subdivision is in; the subdivision a locality is in.</td>
</tr>
<tr>
<td>children</td>
<td>has_many</td>
<td></td>
<td>places</td>
<td>The countries inside a region.</td>
</tr>
</tbody></table>

<h3 id="success-http-response-code">Success HTTP response code</h3>

<p><code class="prettyprint">201 Created</code></p>

          <h2 id="update-a-place-record"><a name="places_update"></a>Update a place record</h2>

<blockquote>
<p>Request body | <code class="prettyprint">PATCH /places/europe</code></p>
</blockquote>
<pre class="highlight plaintext"><code>{
  "data": {
    "type": "places",
    "id": "europe",
    "attributes": {
      "name": "New Name",
      "short_name": "Short",
      "also_known_as": ["Edited Region", "Renamed Region"],
      "latitude": "54.5",
      "longitude": "15.3",
      "iso_code": ""
    },
    "relationships": {
      "children": {
        "data": [
          { "type": "places", "id": "219" },
          { "type": "places", "id": "71" },
          { "type": "places", "id": "75" }
        ]
      }
    }
  }
}
</code></pre>
<blockquote>
<p>Response body | <code class="prettyprint">HTTP 200</code></p>
</blockquote>
<pre class="highlight plaintext"><code>{
  "data": {
    "id": "234",
    "type": "places",
    "attributes": {
      "kind": "region",
      "slug": "new-name",
      "name": "New Name",
      "formatted": "New Name",
      "short_name": "Short",
      "also_known_as": [
        "Edited Region",
        "Renamed Region"
      ],
      "latitude": 54.5,
      "longitude": 15.3,
      "iso_code": ""
    },
    "relationships": {
      "parent": {
        "data": null,
        "links": {
          "related": "http://api.dbljump.com/places/niue"
        }
      },
      "children": {
        "data": [
          {
            "id": "219",
            "type": "places"
          },
          {
            "id": "71",
            "type": "places"
          },
          {
            "id": "75",
            "type": "places"
          }
        ],
        "links": {
          "related": "http://api.dbljump.com/places/new-name/children"
        }
      },
      "regions": {
        "data": null,
        "links": {
          "related": "http://api.dbljump.com/places/new-name/regions"
        }
      },
      "created_by": {
        "data": {
          "id": "1",
          "type": "users"
        },
        "links": {
          "related": "http://api.dbljump.com/users/1"
        }
      }
    },
    "links": {
      "self": "http://api.dbljump.com/places/new-name"
    }
  },
  "included": [
    {
      "id": "1",
      "type": "users",
      "attributes": {
        "username": "tikithekiwi",
        "role": "admin",
        "given_names": "Tiki",
        "family_name": "the Kiwi",
        "avatar": null
      },
      "links": {
        "self": "http://api.dbljump.com/users/1"
      }
    }
  ],
  "meta": {
    "keywords": "new name, short, edited region, renamed region, , place, geography, dbljump, video games, pc games, gaming",
    "description": "Find video game companies and games industry professionals from New Name at Dbljump.",
    "created_at": "2017-04-05T13:55:46.264Z",
    "updated_at": "2017-04-14T09:48:24.498Z"
  }
}
</code></pre>
<p>Update an existing place record. The user must be an admin, except for <code class="prettyprint">locality</code> records that were created by the current user. The <code class="prettyprint">kind</code> attribute cannot be changed.</p>

<ul>
<li>User authentication: required</li>
<li>Authorization level: admin, except for <code class="prettyprint">locality</code> records that were created by the current user.</li>
</ul>

<h3 id="http-request">HTTP request</h3>

<p><code class="prettyprint">PATCH /places/{slug}</code> (replace <code class="prettyprint">{slug}</code> with place record slug)</p>

<h3 id="request-attributes">Request attributes</h3>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Req&rsquo;d?</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>string</td>
<td>Y</td>
<td>Unique. 2-250 chars. English-language common name, e.g. &lsquo;United States&rsquo;.</td>
</tr>
<tr>
<td>short_name</td>
<td>string</td>
<td></td>
<td>Unique. 2-20 chars. Common short name, e.g. &#39;USA&rsquo;.</td>
</tr>
<tr>
<td>also_known_as</td>
<td>array</td>
<td></td>
<td>Members must be 2-50 char strings. E.g. <code class="prettyprint">[&#39;US&#39;, &#39;America&#39;]</code>.</td>
</tr>
<tr>
<td>latitude</td>
<td>number/float</td>
<td></td>
<td>Between -90 and 90.</td>
</tr>
<tr>
<td>longitude</td>
<td>number/float</td>
<td></td>
<td>Between -180 and 180.</td>
</tr>
<tr>
<td>iso_code</td>
<td>string</td>
<td>Country-only</td>
<td>Unique. 2 chars. ISO 3166-1 country code.</td>
</tr>
</tbody></table>

<h3 id="relationships">Relationships</h3>

<table><thead>
<tr>
<th>Name</th>
<th>Relationship</th>
<th>Req&rsquo;d?</th>
<th>JSON:API type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>parent</td>
<td>belongs_to</td>
<td>Subdivisions and localities only</td>
<td>places</td>
<td>The country a subdivision is in; the subdivision a locality is in.</td>
</tr>
<tr>
<td>children</td>
<td>has_many</td>
<td></td>
<td>places</td>
<td>The countries inside a region.</td>
</tr>
</tbody></table>

<h3 id="success-http-response-code">Success HTTP response code</h3>

<p><code class="prettyprint">200 OK</code></p>

          <h2 id="delete-a-place-record">Delete a place record</h2>

<p>Delete an existing place record. Admin-level authorization required.</p>

<ul>
<li>User authentication: required</li>
<li>Authorization level: admin</li>
</ul>

<h3 id="http-request">HTTP request</h3>

<p><code class="prettyprint">DELETE /places/{slug}</code> (replace <code class="prettyprint">{slug}</code> with place record slug)</p>

<h3 id="success-http-response-code">Success HTTP response code</h3>

<p><code class="prettyprint">204 No Content</code></p>

          <h2 id="get-all-place-children"><a name="places_children_index"></a>Get all place children</h2>

<blockquote>
<p>Response body | <code class="prettyprint">HTTP 200</code></p>
</blockquote>
<pre class="highlight plaintext"><code># GET /places/united-states/children?page[size]=3

{
  "data": [
    {
      "id": "329",
      "type": "places",
      "attributes": {
        "kind": "subdivision",
        "slug": "alabama-united-states",
        "name": "Alabama",
        "formatted": "Alabama, United States",
        "short_name": null,
        "also_known_as": [],
        "latitude": 32.3182314,
        "longitude": -86.902298,
        "iso_code": null
      },
      "relationships": {
        "parent": {
          "data": {
            "id": "220",
            "type": "places"
          },
          "links": {
            "related": "http://api.dbljump.com/places/united-states"
          }
        },
        "children": {
          "data": [],
          "links": {
            "related": "http://api.dbljump.com/places/alabama-united-states/children"
          }
        },
        "regions": {
          "data": [
            {
              "id": "238",
              "type": "places"
            },
            {
              "id": "233",
              "type": "places"
            }
          ],
          "links": {
            "related": "http://api.dbljump.com/places/alabama-united-states/regions"
          }
        },
        "created_by": {
          "data": {
            "id": "1",
            "type": "users"
          },
          "links": {
            "related": "http://api.dbljump.com/users/1"
          }
        }
      },
      "links": {
        "self": "http://api.dbljump.com/places/alabama-united-states"
      }
    },
    {
      "id": "335",
      "type": "places",
      "attributes": {
        "kind": "subdivision",
        "slug": "alaska-united-states",
        "name": "Alaska",
        "formatted": "Alaska, United States",
        "short_name": null,
        "also_known_as": [],
        "latitude": 64.2008413,
        "longitude": -149.4936733,
        "iso_code": null
      },
      "relationships": {
        "parent": {
          "data": {
            "id": "220",
            "type": "places"
          },
          "links": {
            "related": "http://api.dbljump.com/places/united-states"
          }
        },
        "children": {
          "data": [],
          "links": {
            "related": "http://api.dbljump.com/places/alaska-united-states/children"
          }
        },
        "regions": {
          "data": [
            {
              "id": "238",
              "type": "places"
            },
            {
              "id": "233",
              "type": "places"
            }
          ],
          "links": {
            "related": "http://api.dbljump.com/places/alaska-united-states/regions"
          }
        },
        "created_by": {
          "data": {
            "id": "1",
            "type": "users"
          },
          "links": {
            "related": "http://api.dbljump.com/users/1"
          }
        }
      },
      "links": {
        "self": "http://api.dbljump.com/places/alaska-united-states"
      }
    },
    {
      "id": "398",
      "type": "places",
      "attributes": {
        "kind": "subdivision",
        "slug": "american-samoa-united-states",
        "name": "American Samoa",
        "formatted": "American Samoa, United States",
        "short_name": null,
        "also_known_as": [],
        "latitude": 21.3239718,
        "longitude": -157.876498,
        "iso_code": null
      },
      "relationships": {
        "parent": {
          "data": {
            "id": "220",
            "type": "places"
          },
          "links": {
            "related": "http://api.dbljump.com/places/united-states"
          }
        },
        "children": {
          "data": [],
          "links": {
            "related": "http://api.dbljump.com/places/american-samoa-united-states/children"
          }
        },
        "regions": {
          "data": [
            {
              "id": "238",
              "type": "places"
            },
            {
              "id": "233",
              "type": "places"
            }
          ],
          "links": {
            "related": "http://api.dbljump.com/places/american-samoa-united-states/regions"
          }
        },
        "created_by": {
          "data": {
            "id": "1",
            "type": "users"
          },
          "links": {
            "related": "http://api.dbljump.com/users/1"
          }
        }
      },
      "links": {
        "self": "http://api.dbljump.com/places/american-samoa-united-states"
      }
    }
  ],
  "links": {
    "self": "http://api.dbljump.com/places/united-states/children?page%5Bnumber%5D=1&amp;page%5Bsize%5D=3",
    "next": "http://api.dbljump.com/places/united-states/children?page%5Bnumber%5D=2&amp;page%5Bsize%5D=3",
    "last": "http://api.dbljump.com/places/united-states/children?page%5Bnumber%5D=20&amp;page%5Bsize%5D=3"
  },
  "meta": {
    "total_items": 60
  }
}
</code></pre>
<p>Retrieve all places that belong to a given places, i.e. countries that belong to a region; subdivisions that belong to a country; and localities that belong to a subdivision. Returns a <code class="prettyprint">404</code> error for localities, which do not have children. Automatically paginated.</p>

<ul>
<li>User authentication: not required</li>
<li>Authorization level: n/a</li>
</ul>

<h3 id="http-request">HTTP request</h3>

<p><code class="prettyprint">GET /places/{place-slug}/children</code></p>

<h3 id="url-query-parameters">URL query parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>fields[{record-type}]</td>
<td>All fields</td>
<td>Return only specified fields, e.g. <code class="prettyprint">?fields[places]=name,formatted</code></td>
</tr>
<tr>
<td>filter[{field}]</td>
<td>All records</td>
<td>Filter search by field, e.g. <code class="prettyprint">?filter[name]=Tokyo Prefecture</code></td>
</tr>
<tr>
<td>page[number]</td>
<td>1</td>
<td>Select the page number, e.g. <code class="prettyprint">?page[number]=3</code></td>
</tr>
<tr>
<td>page[size]</td>
<td>30</td>
<td>Select the number of records per page, e.g. <code class="prettyprint">?page[size]=20</code></td>
</tr>
</tbody></table>

<h3 id="success-http-response-code">Success HTTP response code</h3>

<p><code class="prettyprint">200 OK</code></p>

          <h2 id="get-all-place-regions"><a name="places_regions_index"></a>Get all place regions</h2>

<blockquote>
<p>Response body | <code class="prettyprint">HTTP 200</code></p>
</blockquote>
<pre class="highlight plaintext"><code># GET /places/united-states/regions

{
  "data": [
    {
      "id": "238",
      "type": "places",
      "attributes": {
        "kind": "region",
        "slug": "us-and-canada",
        "name": "US and Canada",
        "formatted": "US and Canada",
        "short_name": "US&amp;Ca",
        "also_known_as": [],
        "latitude": null,
        "longitude": null,
        "iso_code": null
      },
      "relationships": {
        "parent": {
          "data": null
        },
        "children": {
          "data": [
            {
              "id": "36",
              "type": "places"
            },
            {
              "id": "220",
              "type": "places"
            }
          ],
          "links": {
            "related": "http://api.dbljump.com/places/us-and-canada/children"
          }
        },
        "regions": {
          "data": null,
          "links": {
            "related": "http://api.dbljump.com/places/us-and-canada/regions"
          }
        },
        "created_by": {
          "data": {
            "id": "1",
            "type": "users"
          },
          "links": {
            "related": "http://api.dbljump.com/users/1"
          }
        }
      },
      "links": {
        "self": "http://api.dbljump.com/places/us-and-canada"
      }
    },
    {
      "id": "233",
      "type": "places",
      "attributes": {
        "kind": "region",
        "slug": "north-america",
        "name": "North America",
        "formatted": "North America",
        "short_name": "NA",
        "also_known_as": [],
        "latitude": null,
        "longitude": null,
        "iso_code": null
      },
      "relationships": {
        "parent": {
          "data": null
        },
        "children": {
          "data": [
            {
              "id": "36",
              "type": "places"
            },
            {
              "id": "133",
              "type": "places"
            },
            {
              "id": "220",
              "type": "places"
            }
          ],
          "links": {
            "related": "http://api.dbljump.com/places/north-america/children"
          }
        },
        "regions": {
          "data": null,
          "links": {
            "related": "http://api.dbljump.com/places/north-america/regions"
          }
        },
        "created_by": {
          "data": {
            "id": "1",
            "type": "users"
          },
          "links": {
            "related": "http://api.dbljump.com/users/1"
          }
        }
      },
      "links": {
        "self": "http://api.dbljump.com/places/north-america"
      }
    }
  ],
  "links": {},
  "meta": {
    "total_items": 2
  }
}
</code></pre>
<p>Retrieve all regions that a given country belongs to. Returns a <code class="prettyprint">404</code> error for regions, subdivision, and localities. Automatically paginated.</p>

<ul>
<li>User authentication: not required</li>
<li>Authorization level: n/a</li>
</ul>

<h3 id="http-request">HTTP request</h3>

<p><code class="prettyprint">GET /places/{place-slug}/regions</code></p>

<h3 id="url-query-parameters">URL query parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>fields[{record-type}]</td>
<td>All fields</td>
<td>Return only specified fields, e.g. <code class="prettyprint">?fields[places]=formatted</code></td>
</tr>
<tr>
<td>filter[{field}]</td>
<td>All records</td>
<td>Filter search by field, e.g. <code class="prettyprint">?filter[name]=Asia</code></td>
</tr>
<tr>
<td>page[number]</td>
<td>1</td>
<td>Select the page number, e.g. <code class="prettyprint">?page[number]=3</code></td>
</tr>
<tr>
<td>page[size]</td>
<td>30</td>
<td>Select the number of records per page, e.g. <code class="prettyprint">?page[size]=20</code></td>
</tr>
</tbody></table>

<h3 id="success-http-response-code">Success HTTP response code</h3>

<p><code class="prettyprint">200 OK</code></p>

          <h2 id="errors">Errors</h2>

<p>Errors specific to creating and updating place records.</p>

<table><thead>
<tr>
<th>HTTP code</th>
<th>Error code</th>
<th>Pointer</th>
<th>Title</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>PLACE_KIND_BLANK</td>
<td>kind</td>
<td>Kind is required.</td>
</tr>
<tr>
<td>400</td>
<td>PLACE_KIND_INCLUSION</td>
<td>kind</td>
<td>Kind must be &lsquo;region&rsquo;, &#39;country&rsquo;, &#39;subdivision&rsquo; or &#39;locality&rsquo;.</td>
</tr>
<tr>
<td>400</td>
<td>PLACE_KIND_PRESENT</td>
<td>kind</td>
<td>Kind cannot be changed.</td>
</tr>
<tr>
<td>400</td>
<td>PLACE_NAME_BLANK</td>
<td>name</td>
<td>Name is required.</td>
</tr>
<tr>
<td>400</td>
<td>PLACE_NAME_TAKEN</td>
<td>name</td>
<td>Name has already been taken.</td>
</tr>
<tr>
<td>400</td>
<td>PLACE_NAME_TOO_SHORT</td>
<td>name</td>
<td>Name must be at least 2 characters.</td>
</tr>
<tr>
<td>400</td>
<td>PLACE_NAME_TOO_LONG</td>
<td>name</td>
<td>Name cannot be more than 50 characters.</td>
</tr>
<tr>
<td>400</td>
<td>PLACE_SHORT_NAME_TAKEN</td>
<td>short_name</td>
<td>Short name has already been taken.</td>
</tr>
<tr>
<td>400</td>
<td>PLACE_SHORT_NAME_TOO_SHORT</td>
<td>short_name</td>
<td>Short name must be at least 2 characters.</td>
</tr>
<tr>
<td>400</td>
<td>PLACE_SHORT_NAME_TOO_LONG</td>
<td>short_name</td>
<td>Short name cannot be more than 20 characters.</td>
</tr>
<tr>
<td>400</td>
<td>PLACE_ALSO_KNOWN_AS_TOO_SHORT</td>
<td>also_known_as</td>
<td>Also-known-as tags must be at least 2 characters.</td>
</tr>
<tr>
<td>400</td>
<td>PLACE_ALSO_KNOWN_AS_TOO_LONG</td>
<td>also_known_as</td>
<td>Also-known-as tags cannot be more than 50 characters.</td>
</tr>
<tr>
<td>400</td>
<td>PLACE_LATITUDE_GREATER_THAN_OR_EQUAL_TO</td>
<td>latitude</td>
<td>Latitude must be between -90 and 90.</td>
</tr>
<tr>
<td>400</td>
<td>PLACE_LATITUDE_LESS_THAN_OR_EQUAL_TO</td>
<td>latitude</td>
<td>Latitude must be between -90 and 90.</td>
</tr>
<tr>
<td>400</td>
<td>PLACE_LONGITUDE_GREATER_THAN_OR_EQUAL_TO</td>
<td>longitude</td>
<td>Longitude must be between -180 and 180.</td>
</tr>
<tr>
<td>400</td>
<td>PLACE_LONGITUDE_LESS_THAN_OR_EQUAL_TO</td>
<td>longitude</td>
<td>Longitude must be between -180 and 180.</td>
</tr>
<tr>
<td>400</td>
<td>PLACE_ISO_CODE_BLANK</td>
<td>iso_code</td>
<td>ISO code is required for country records.</td>
</tr>
<tr>
<td>400</td>
<td>PLACE_ISO_CODE_PRESENT</td>
<td>iso_code</td>
<td>ISO code is only used by country records.</td>
</tr>
<tr>
<td>400</td>
<td>PLACE_ISO_CODE_TAKEN</td>
<td>iso_code</td>
<td>There&rsquo;s already a country with that ISO code.</td>
</tr>
<tr>
<td>400</td>
<td>PLACE_ISO_CODE_TOO_SHORT</td>
<td>iso_code</td>
<td>ISO code must be 2 characters long.</td>
</tr>
<tr>
<td>400</td>
<td>PLACE_ISO_CODE_TOO_LONG</td>
<td>iso_code</td>
<td>ISO code must be 2 characters long.</td>
</tr>
<tr>
<td>400</td>
<td>PLACE_PARENT_BLANK</td>
<td>relationships/parent/data/id</td>
<td>Parent is required for subdivisions and localities.</td>
</tr>
<tr>
<td>400</td>
<td>PLACE_PARENT_PRESENT</td>
<td>relationships/parent/data/id</td>
<td>Regions and countries cannot have a parent place.</td>
</tr>
<tr>
<td>400</td>
<td>PLACE_PARENT_INVALID</td>
<td>relationships/parent/data/id</td>
<td>That parent place ID isn&rsquo;t valid.</td>
</tr>
<tr>
<td>400</td>
<td>PLACE_CHILDREN_PRESENT</td>
<td>relationships/parent/data/id</td>
<td>Localities cannot cannot contain child places.</td>
</tr>
<tr>
<td>400</td>
<td>PLACE_CHILDREN_INVALID</td>
<td>relationships/parent/data/id</td>
<td>At least one of the child place IDs isn&rsquo;t valid.</td>
</tr>
</tbody></table>

          <h1 id="errors">Errors</h1>

<p>General errors not specific to one part of the application.</p>

<h3 id="authorization-errors">Authorization errors</h3>

<table><thead>
<tr>
<th>HTTP code</th>
<th>Error code</th>
<th>Pointer</th>
<th>Title</th>
</tr>
</thead><tbody>
<tr>
<td>401</td>
<td>USER_ACTIVATION_REQUIRED</td>
<td>n/a</td>
<td>User not yet activated.</td>
</tr>
<tr>
<td>401</td>
<td>USER_CREDENTIALS_INVALID</td>
<td>n/a</td>
<td>Invalid email and password combination.</td>
</tr>
<tr>
<td>401</td>
<td>USER_LOGIN_EXPIRED</td>
<td>n/a</td>
<td>The JWT in the header has expired.</td>
</tr>
<tr>
<td>401</td>
<td>USER_LOGIN_TOKEN_INVALID</td>
<td>n/a/</td>
<td>User login token invalid.</td>
</tr>
<tr>
<td>401</td>
<td>USER_UNAUTHORIZED</td>
<td>n/a</td>
<td>User not authorized.</td>
</tr>
</tbody></table>

<h3 id="get-errors">GET errors</h3>

<table><thead>
<tr>
<th>HTTP code</th>
<th>Error code</th>
<th>Pointer</th>
<th>Title</th>
</tr>
</thead><tbody>
<tr>
<td>404</td>
<td>RECORD_NOT_FOUND</td>
<td>n/a</td>
<td>Record not found.</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="JSON">JSON</a>
          </div>
      </div>
    </div>
  </body>
</html>
